{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///pic-tune.min.js","webpack:///webpack/bootstrap 835fd1b2559dd66d43c8","webpack:///./node_modules/_vue-style-loader@3.1.2@vue-style-loader/lib/listToStyles.js","webpack:///./node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js","webpack:///./src/picTune/index.js","webpack:///./src/picTune/main.css?7528","webpack:///./src/picTune/main.css","webpack:///./src/picTune/scale.js","webpack:///./src/picTune/glfx.js","webpack:///./src/picTune/utils.js","webpack:///./node_modules/_vue-style-loader@3.1.2@vue-style-loader/lib/addStylesClient.js"],"names":["root","factory","exports","module","define","amd","self","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","49","parentId","list","styles","newStyles","length","item","id","css","media","sourceMap","part","parts","push","5","cssWithMappingToString","useSourceMap","content","cssMapping","btoa","sourceMapping","toComment","concat","sources","map","source","sourceRoot","join","unescape","encodeURIComponent","JSON","stringify","toString","mediaQuery","alreadyImportedModules","50","__webpack_exports__","_classCallCheck","instance","Constructor","TypeError","bindEvents","editorObj","updatePos","e","type","match","touches","curPos","movementX","pageX","movementY","pageY","drawing","isDraw","drawable","rate","picture","height","canvas","clientHeight","x","pageLeft","y","pageTop","drawPoint","draw","shift","moveStart","target","maxPos","left","clientWidth","crop","offsetWidth","top","offsetHeight","width","addOperate","isAdd","__WEBPACK_IMPORTED_MODULE_3__utils__","addition","skip","style","display","addContent","getElementsByClassName","isContent","isMove","len","movePoints","curPoint","pointDirection","isResize","clearTimeout","moveTimer","setTimeout","moveEnd","moveing","cropStyle","offsetLeft","offsetTop","newLeft","newTop","newWidth","newHeight","cropRate","onMovingCrop","sign","indexOf","BORDER_PIX","isNaN","confirm","commitAdd","adjustSize","pWidth","pHeight","pRate","parseFloat","toFixed","sStyle","cStyle","sWidth","sHeight","sRate","getTop","getLeft","offset","offsetParent","wrapper","showImage","getElementsByTagName","onmousedown","addEventListener","onmousemove","onclick","className","toggleAdd","onmouseup","onload","texture","update","error","console","log","window","onresize","value","__WEBPACK_IMPORTED_MODULE_0__main_css__","__WEBPACK_IMPORTED_MODULE_1__scale_js__","__WEBPACK_IMPORTED_MODULE_2__glfx_js__","_createClass","defineProperties","props","descriptor","writable","key","protoProps","staticProps","CACHES","PicTune","options","arguments","undefined","assign","element","url","output","file","lineStyle","color","version","document","getElementById","createElement","originImage","Image","innerText","innerHTML","appendChild","loadAsUrl","_this","then","data","loadAsFile","_this2","fr","FileReader","Promise","resolve","reject","result","opacity","readAsDataURL","dataurl","toDataURL","src","idx","toggle","isShow","cWidth","cHeight","curRate","getContext","drawImage","parseInt","postion","getCropPosition","get2dCanvas","angle","isTurnOver","c2","pW","pH","cX","cY","A","Math","PI","sinA","abs","sin","cosA","cos","rotate","brightness","contrast","saturation","radius","brightnesscontrastSaturationBur","hue","greenRed","purpleGreen","yellowBlue","hueColor","isBlob","fileName","aLink","evt","createEvent","split","href","URL","createObjectURL","getData","download","initMouseEvent","dispatchEvent","params","formData","FormData","formKey","isOrigin","append","post","points","lineWidth","strokeStyle","lineJoin","beginPath","moveTo","lineTo","stroke","addStyle","ss","contentEditable","img","addHeight","lineHeight","font","fillStyle","fillText","Vue","51","locals","52","53","scale","input","inputRemovable","setNewCanvas","newCanvas","_typeof","dw","dh","newCtx","getImageData","tmpBuffer","dindex","imageData","byteBuffer","dwh4","TIMES","HAS_ALPHA","ctx","naturalWidth","naturalHeight","runtimeStyle","mw","mh","removeAttribute","sw","sh","sourceBuffer","clearRect","scaleX","scaleY","sx","sy","dx","dy","dyindex","idy","isx","isy","w","wx","nwx","wy","nwy","crossX","crossY","r","g","b","a","dsy","dsx","row0","row1","row2","row3","col0","col1","col2","col3","dw4","sw4","sindex","scaleXY","bicubic","t","Float32Array","putImageData","Symbol","iterator","obj","constructor","54","fx","clamp","lo","hi","max","min","wrapTexture","_","loadContentsOf","gl","destroy","Texture","fromElement","initialize","UNSIGNED_BYTE","getExtension","testTexture","RGBA","FLOAT","drawTo","spareTexture","extraTexture","flippedShader","Shader","isInitialized","use","getDefaultShader","drawRect","simpleShader","shader","uniforms","textureIn","textureOut","swapWith","replace","node","parentNode","insertBefore","removeChild","contents","getPixelArray","h","array","Uint8Array","readPixels","wrap","func","apply","args","randomShaderFunc","delta","SplineInterpolator","xa","ya","u","y2","sort","sig","ddydx","OESTextureFloatLinear","getOESTextureFloatLinear","$OES_texture_float_linear$","oldGetExtension","getSupportedExtensions","extensions","oldGetSupportedExtensions","framebuffer","createFramebuffer","byteTexture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","texImage2D","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","rgba","floatTexture","LINEAR","program","createProgram","vertexShader","createShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","shaderSource","compileShader","attachShader","linkProgram","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STREAM_DRAW","enableVertexAttribArray","vertexAttribPointer","pixel","useProgram","viewport","drawArrays","POINTS","WebGLRenderingContext","premultipliedAlpha","preserveDrawingBuffer","isArray","isNumber","compileSource","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","vertexSource","fragmentSource","vertexAttribute","texCoordAttribute","defaultVertexSource","defaultFragmentSource","getProgramParameter","LINK_STATUS","getProgramInfoLog","deleteProgram","location","getUniformLocation","uniform1fv","uniform2fv","uniform3fv","uniform4fv","uniformMatrix3fv","uniformMatrix4fv","uniform1f","textures","uniform1i","right","bottom","getParameter","VIEWPORT","vertexBuffer","STATIC_DRAW","texCoordBuffer","getAttribLocation","TRIANGLE_STRIP","defaultShader","interpolate","klo","khi","k","format","getCanvas","videoWidth","videoHeight","initFromBytes","deleteTexture","unit","activeTexture","TEXTURE0","unuse","ensureFormat","callback","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","Error","fillUsingCanvas","toImage","image","size","pixels","createImageData","other","temp","55","turnOver","oC","oGC","oImg","newImg","j","getXY","setXY","runFunction","fn","thisObj","argus","argsl","Array","convertDataurlToBlob","urlData","bytes","atob","ab","ArrayBuffer","ia","charCodeAt","Blob","toggleClass","el","cls","reg","RegExp","isHas","isChange","ajaxFactory","method","req","XMLHttpRequest","body","Query","res","getResponseHeader","responseType","response","responseText","open","setRequestHeader","send","http","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","next","done","err","parse","search","queryString","substring","query","forEach","queryStr","_queryStr$split","_queryStr$split2","prefix","keys","6","addStylesToDom","domStyle","stylesInDom","refs","createStyleElement","styleElement","head","remove","querySelector","ssrIdKey","isProduction","noop","isOldIE","styleIndex","singletonCounter","singletonElement","applyToSingletonTag","bind","applyToTag","newObj","index","styleSheet","cssText","replaceText","cssNode","createTextNode","childNodes","setAttribute","ssrId","firstChild","hasDocument","DEBUG","listToStyles","navigator","test","userAgent","toLowerCase","_isProduction","_options","newList","mayRemove","textStore","replacement","filter","Boolean"],"mappings":"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","file":"pic-tune.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"picTune\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"picTune\"] = factory();\n\telse\n\t\troot[\"picTune\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"picTune\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"picTune\"] = factory();\n\telse\n\t\troot[\"picTune\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"dist/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 50);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 49:\n/***/ (function(module, exports) {\n\n/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nmodule.exports = function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n\n\n/***/ }),\n\n/***/ 5:\n/***/ (function(module, exports) {\n\n/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n/***/ }),\n\n/***/ 50:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__main_css__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__main_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__main_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__scale_js__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__glfx_js__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__utils__ = __webpack_require__(55);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n// \nvar BORDER_PIX = 4;\n\n// \nvar CACHES = [];\n\n/**\n * \n * @param  {Object} editorObj  \n * @return \n */\nfunction bindEvents(editorObj) {\n    var wrapper = editorObj.wrapper;\n    var source = editorObj.source;\n    var picture = editorObj.picture;\n    var showImage = editorObj.showImage;\n    var canvas = editorObj.canvas;\n    var crop = editorObj.crop;\n    var addition = editorObj.addition;\n    var addOperate = addition.getElementsByClassName('editor-add-operate')[0];\n    var addContent = addition.getElementsByClassName('editor-add-content')[0];\n\n    var isMove = false,\n        isResize = false,\n        isDraw = false,\n        isAdd = false,\n        isContent = false,\n        maxPos = {\n        left: 0,\n        top: 0,\n        width: 0,\n        height: 0\n    },\n        curPoint = \"\",\n        moveTimer = 0;\n\n    var movePoints = crop.getElementsByTagName('div');\n    var pointDirection = ['lt', 'rt', 'lb', 'rb'];\n\n    crop.onmousedown = moveStart;\n    crop.addEventListener('touchstart', moveStart, false);\n\n    canvas.onmousedown = moveStart;\n    canvas.onmousemove = drawing;\n    canvas.addEventListener('touchstart', moveStart, false);\n    canvas.addEventListener('touchmove', drawing, false);\n\n    addOperate.onmousedown = moveStart;\n    addOperate.addEventListener('touchstart', moveStart, false);\n    addOperate.onclick = function (e) {\n        switch (e.target.className) {\n            case 'editor-add-cancel':\n                editorObj.toggleAdd(false);\n                break;\n        }\n    };\n\n    addContent.onmousedown = moveStart;\n    addContent.addEventListener('touchstart', moveStart, false);\n\n    wrapper.onmousemove = moveing;\n    wrapper.onmouseup = moveEnd;\n    wrapper.addEventListener('touchmove', moveing, false);\n    wrapper.addEventListener('touchend', moveEnd, false);\n\n    var curPos = {\n        pageLeft: 0,\n        pageTop: 0,\n        pageX: 0,\n        pageY: 0\n    };\n\n    var drawPoint = [];\n\n    function updatePos(e) {\n        var isTouch = !!e.type.match('touch');\n\n        if (isTouch) e = e.touches[0];\n\n        curPos.movementX = e.pageX - curPos.pageX;\n        curPos.movementY = e.pageY - curPos.pageY;\n\n        curPos.pageX = e.pageX;\n        curPos.pageY = e.pageY;\n    }\n\n    function drawing(e) {\n        if (!isDraw || !editorObj.drawable) return;\n\n        var rate = picture.height / canvas.clientHeight,\n            x = (curPos.pageX - curPos.pageLeft) * rate,\n            y = (curPos.pageY - curPos.pageTop) * rate;\n\n        drawPoint.push([x, y]);\n        updatePos(e);\n\n        if (drawPoint.length > 2) {\n            editorObj.draw(drawPoint);\n            drawPoint.shift();\n        }\n    }\n\n    function moveStart(e) {\n        var target = e.target;\n\n        maxPos.left = source.clientWidth - crop.offsetWidth;\n        maxPos.top = source.clientHeight - crop.offsetHeight;\n        maxPos.width = source.clientWidth, maxPos.height = source.clientHeight;\n\n        updatePos(e);\n\n        switch (target) {\n            case canvas:\n                isDraw = true;\n                break;\n            case addOperate:\n                isAdd = true;\n                !Object(__WEBPACK_IMPORTED_MODULE_3__utils__[\"d\" /* toggleClass */])(addition, 'active', false) && editorObj.skip('-');\n                addition.style.display = 'block';\n                break;\n            case addContent.getElementsByClassName('editor-resize-handle')[0]:\n                isContent = true;\n                !Object(__WEBPACK_IMPORTED_MODULE_3__utils__[\"d\" /* toggleClass */])(addition, 'active', false) && editorObj.skip('-');\n                addition.style.display = 'block';\n                break;\n            default:\n                isMove = true;\n                for (var i = 0, len = movePoints.length; i < len; ++i) {\n                    if (movePoints[i] === target) {\n                        curPoint = pointDirection[i];\n                        isMove = false;\n                        isResize = true;\n                        break;\n                    }\n                }\n        }\n\n        clearTimeout(moveTimer);\n        moveTimer = setTimeout(moveEnd, 1000);\n    }\n\n    function moveing(e) {\n        updatePos(e);\n\n        var cropStyle = crop.style,\n            movementX = curPos.movementX,\n            movementY = curPos.movementY,\n            offsetLeft = crop.offsetLeft,\n            offsetTop = crop.offsetTop,\n            newLeft = void 0,\n            newTop = void 0,\n            newWidth = void 0,\n            newHeight = void 0;\n\n        var cropRate = editorObj.cropRate;\n\n        if (isMove) {\n            // \n            newLeft = offsetLeft + movementX;\n            newTop = offsetTop + movementY;\n\n            newLeft = newLeft < 0 ? 0 : newLeft > maxPos.left ? maxPos.left : newLeft;\n            newTop = newTop < 0 ? 0 : newTop > maxPos.top ? maxPos.top : newTop;\n\n            if (newLeft != offsetLeft) cropStyle.left = newLeft + \"px\";\n            if (newTop != offsetTop) cropStyle.top = newTop + \"px\";\n\n            Object(__WEBPACK_IMPORTED_MODULE_3__utils__[\"c\" /* runFunction */])(editorObj.onMovingCrop, editorObj, []);\n        } else if (isResize) {\n            // \n            var offsetWidth = crop.offsetWidth,\n                offsetHeight = crop.offsetHeight;\n\n            if (cropRate) {\n                var sign = curPoint == 'lt' || curPoint == \"rb\" ? 1 : -1;\n\n                if (cropRate > 1) {\n                    movementX = sign * movementY * cropRate;\n                } else {\n                    movementY = sign * movementX / cropRate;\n                }\n            }\n\n            // \n            if (curPoint.indexOf(\"l\") != -1) {\n                newLeft = offsetLeft + movementX;\n                newWidth = offsetWidth - movementX;\n\n                if (newLeft < 0) {\n                    newWidth = newWidth + newLeft;\n                    newLeft = 0;\n\n                    if (cropRate) {\n                        newHeight = (newWidth - BORDER_PIX) / cropRate + BORDER_PIX;\n                    }\n                }\n            } else {\n                newWidth = offsetWidth + movementX;\n\n                if (newWidth + offsetLeft > maxPos.width) {\n                    newWidth = maxPos.width - offsetLeft;\n\n                    if (cropRate) {\n                        newHeight = (newWidth - BORDER_PIX) / cropRate + BORDER_PIX;\n                    }\n                }\n            }\n\n            // \n            if (curPoint.indexOf(\"t\") != -1 && !newHeight) {\n                newTop = offsetTop + movementY;\n                newHeight = offsetHeight - movementY;\n\n                if (newTop < 0) {\n                    newHeight = newHeight + newTop;\n                    newTop = 0;\n\n                    if (cropRate) {\n                        newWidth = (newHeight - BORDER_PIX) * cropRate + BORDER_PIX;\n                    }\n                }\n            } else if (!newHeight) {\n                newHeight = offsetHeight + movementY;\n\n                if (newHeight + offsetTop > maxPos.height) {\n                    newHeight = maxPos.height - offsetTop;\n\n                    if (cropRate) {\n                        newWidth = (newHeight - BORDER_PIX) * cropRate + BORDER_PIX;\n                    }\n                }\n            }\n\n            if (isNaN(newLeft)) newLeft = offsetLeft;\n            if (isNaN(newTop)) newTop = offsetTop;\n\n            if (cropRate) {\n                if (newLeft + newWidth < maxPos.width) {\n                    newHeight = (newWidth - BORDER_PIX) / cropRate + BORDER_PIX;\n                } else if (newTop + newHeight < maxPos.height) {\n                    newWidth = (newHeight - BORDER_PIX) * cropRate + BORDER_PIX;\n                }\n            }\n\n            if (newLeft != offsetLeft) cropStyle.left = newLeft + \"px\";\n            if (newTop != offsetTop) cropStyle.top = newTop + \"px\";\n            if (newWidth != offsetWidth) cropStyle.width = newWidth + \"px\";\n            if (newHeight != offsetHeight) cropStyle.height = newHeight + \"px\";\n\n            Object(__WEBPACK_IMPORTED_MODULE_3__utils__[\"c\" /* runFunction */])(editorObj.onMovingCrop, editorObj, []);\n        } else if (isAdd) {\n            var _newLeft = addition.offsetLeft + curPos.movementX,\n                _newTop = addition.offsetTop + curPos.movementY;\n\n            if (_newLeft < 0) {\n                _newLeft = 0;\n            } else if (_newLeft + addition.offsetWidth > maxPos.width) {\n                _newLeft = maxPos.width - addition.offsetWidth;\n            }\n\n            if (_newTop < 0) {\n                _newTop = 0;\n            } else if (_newTop + addition.offsetHeight > maxPos.height) {\n                _newTop = maxPos.height - addition.offsetHeight;\n            }\n\n            addition.style.left = _newLeft + 'px';\n            addition.style.top = _newTop + 'px';\n        } else if (isContent) {\n            var _newWidth = addContent.offsetWidth,\n                _newHeight = addContent.offsetHeight;\n\n            addContent.style.width = _newWidth + movementX + 'px';\n            addContent.style.height = _newHeight + movementY + 'px';\n        }\n\n        clearTimeout(moveTimer);\n        moveTimer = setTimeout(moveEnd, 1000);\n    }\n\n    function moveEnd() {\n        if (isDraw) {\n            editorObj.confirm();\n            drawPoint.length = 0;\n        }\n\n        if (isAdd || isContent) {\n            editorObj.commitAdd();\n            addition.style.display = 'block';\n        }\n\n        isMove = false;\n        isResize = false;\n        isDraw = false;\n        isAdd = false;\n        isContent = false;\n\n        clearTimeout(moveTimer);\n    }\n\n    picture.onload = function (e) {\n        adjustSize();\n\n        crop.style.display = \"none\";\n\n        canvas.draw(canvas.texture(this)).update();\n    };\n\n    picture.error = function (e) {\n        console.log(e);\n    };\n\n    window.onresize = function (e) {\n        adjustSize();\n    };\n\n    function adjustSize() {\n        var pWidth = picture.width,\n            pHeight = picture.height,\n            pRate = parseFloat((pWidth / pHeight).toFixed(2));\n\n        var sStyle = source.style,\n            cStyle = crop.style;\n\n        sStyle.width = pWidth + BORDER_PIX + \"px\";\n        sStyle.height = pHeight + BORDER_PIX + \"px\";\n\n        var sWidth = source.clientWidth - BORDER_PIX,\n            sHeight = source.clientHeight - BORDER_PIX,\n            sRate = parseFloat((sWidth / sHeight).toFixed(2));\n\n        // \n        if (pRate != sRate) {\n            if (sRate > pRate) {\n                sStyle.width = sHeight * pRate + BORDER_PIX + \"px\";\n            } else {\n                sStyle.height = sWidth / pRate + BORDER_PIX + \"px\";\n            }\n        }\n\n        curPos.pageTop = getTop(canvas);\n        curPos.pageLeft = getLeft(canvas);\n\n        if (cStyle.display == 'block') {\n            var cropRate = editorObj.cropRate;\n\n            cStyle.left = cStyle.top = 0;\n            cStyle.width = cStyle.height = \"100%\";\n\n            if (cropRate && pRate != cropRate) {\n                if (pRate > cropRate) {\n                    cStyle.width = crop.clientHeight * cropRate + BORDER_PIX + 'px';\n                } else {\n                    cStyle.height = crop.clientWidth / cropRate + BORDER_PIX + 'px';\n                }\n            }\n\n            Object(__WEBPACK_IMPORTED_MODULE_3__utils__[\"c\" /* runFunction */])(editorObj.onMovingCrop, editorObj, []);\n        }\n    }\n\n    function getTop(e) {\n        var offset = e.offsetTop;\n        if (e.offsetParent) offset += getTop(e.offsetParent);\n        return offset;\n    }\n\n    function getLeft(e) {\n        var offset = e.offsetLeft;\n        if (e.offsetParent) offset += getLeft(e.offsetParent);\n        return offset;\n    }\n}\n\nvar PicTune = function () {\n    function PicTune() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, PicTune);\n\n        Object.assign(this, {\n            id: '',\n            element: '',\n            width: '',\n            height: '400px',\n            url: '',\n            output: '',\n            file: {},\n            lineStyle: {\n                width: 1,\n                color: '#000',\n                join: 'round'\n            },\n            version: -1,\n            drawable: false,\n            onMovingCrop: function onMovingCrop() {}\n        }, options);\n\n        var wrapper = this.element || document.getElementById(this.id);\n        var source = document.createElement('div');\n        var picture = document.createElement('img');\n        var showImage = document.createElement('img');\n        var canvas = __WEBPACK_IMPORTED_MODULE_2__glfx_js__[\"a\" /* fx */].canvas();\n        var addition = document.createElement('div');\n        var crop = document.createElement('div');\n        var originImage = new Image();\n\n        this.wrapper = wrapper;\n        this.source = source;\n        this.picture = picture;\n        this.showImage = showImage;\n        this.canvas = canvas;\n        this.addition = addition;\n        this.crop = crop;\n        this.originImage = originImage;\n\n        wrapper.className = 'image-editor-wrapper';\n\n        source.className = 'image-editor-source';\n\n        picture.className = 'image-editor-picture';\n\n        showImage.className = 'image-editor-show';\n\n        canvas.className = 'image-editor-canvas';\n        canvas.innerText = 'HTML5.';\n\n        addition.className = 'image-editor-addition';\n        addition.style.display = \"none\";\n        addition.innerHTML = '<div class=\"editor-add-content\" contentEditable=\"true\"></div>' + '<div class=\"editor-add-operate\">' + '<div class=\"editor-add-cancel\"></div>' + '</div>';\n\n        crop.className = 'image-editor-crop';\n        crop.style.display = \"none\";\n        crop.innerHTML = '<div class=\"editor-crop-left editor-crop-top\"></div>' + '<div class=\"editor-crop-right editor-crop-top\"></div>' + '<div class=\"editor-crop-left editor-crop-bottom\"></div>' + '<div class=\"editor-crop-right editor-crop-bottom\"></div>';\n\n        source.appendChild(picture);\n        source.appendChild(showImage);\n        source.appendChild(canvas);\n        source.appendChild(addition);\n        source.appendChild(crop);\n\n        wrapper.appendChild(source);\n\n        if (this.width) wrapper.style.width = this.width;\n        if (this.height) {\n            wrapper.style.height = this.height;\n            wrapper.style['line-height'] = this.height;\n        }\n\n        bindEvents(this);\n\n        if (options.url) this.loadAsUrl(options.url);\n    }\n\n    /**\n     * http\n     * @param  {String} url http\n     * @return {Object}     Promise\n     */\n\n\n    _createClass(PicTune, [{\n        key: 'loadAsUrl',\n        value: function loadAsUrl(url) {\n            var _this = this;\n\n            return __WEBPACK_IMPORTED_MODULE_3__utils__[\"b\" /* http */].get({\n                url: url,\n                type: 'blob'\n            }).then(function (data) {\n                return _this.loadAsFile(data);\n            });\n        }\n\n        /**\n         * \n         * @param  {Object} file blob\n         * @return {Object}      Promise\n         */\n\n    }, {\n        key: 'loadAsFile',\n        value: function loadAsFile(file) {\n            var _this2 = this;\n\n            var fr = new FileReader();\n            var p = new Promise(function (resolve, reject) {\n                fr.onload = function (e) {\n                    CACHES.length = 0;\n                    _this2.version = -1;\n\n                    _this2.confirm(fr.result);\n                    _this2.file = file;\n\n                    _this2.canvas.style.opacity = file.type == \"image/gif\" ? 0 : 1;\n\n                    resolve(fr.result);\n                };\n            });\n\n            fr.readAsDataURL(file);\n\n            return p;\n        }\n\n        /**\n         * \n         * @param  {String} dataurl \n         * @return \n         */\n\n    }, {\n        key: 'confirm',\n        value: function confirm(dataurl) {\n            dataurl = dataurl || this.canvas.toDataURL(this.output || this.file.type);\n\n            if (this.version > -1) {\n                CACHES.length = this.version + 1;\n                this.version = -1;\n            }\n\n            CACHES.push(dataurl);\n\n            this.picture.src = dataurl;\n            this.originImage.src = dataurl;\n            this.showImage.src = dataurl;\n\n            this.addition.style.display = 'none';\n        }\n\n        /**\n         * \n         * @return \n         */\n\n    }, {\n        key: 'reset',\n        value: function reset() {\n            this.picture.src = this.originImage.src;\n            this.addition.style.display = 'none';\n        }\n\n        /**\n         * \n         * @param  {String} idx \"+\"\"-\"\n         * @return \n         */\n\n    }, {\n        key: 'skip',\n        value: function skip(idx) {\n            var dataurl = void 0;\n\n            switch (idx) {\n                case \"+\":\n                    if (this.version !== -1 && ++this.version < CACHES.length) dataurl = CACHES[this.version];\n\n                    if (this.version === CACHES.length) this.version = -1;\n                    break;\n                case \"-\":\n                    if (this.version > 0) {\n                        --this.version;\n                    } else if (CACHES.length > 1) {\n                        this.version = CACHES.length - 2;\n                    }\n\n                    dataurl = CACHES[this.version];\n                    break;\n                default:\n                    dataurl = CACHES[idx];\n            }\n\n            if (dataurl) {\n                this.picture.src = dataurl;\n                this.originImage.src = dataurl;\n                this.showImage.src = dataurl;\n                this.addition.style.display = 'none';\n            }\n        }\n\n        /**\n         * \n         * @return {Object} \n         */\n\n    }, {\n        key: 'getSize',\n        value: function getSize() {\n            var canvas = this.canvas;\n\n            return {\n                width: canvas.width,\n                height: canvas.height\n            };\n        }\n\n        /**\n         * /\n         * @param  {Boolean} toggle /\n         * @param  {Number}  rate   \n         * @return {Boolean}        /\n         */\n\n    }, {\n        key: 'toggleCrop',\n        value: function toggleCrop(toggle, rate) {\n            var crop = this.crop;\n            var cropRate = this.cropRate = parseFloat((rate || 0).toFixed(2));\n\n            var cStyle = crop.style,\n                isShow = cStyle.display == \"block\";\n\n            if (typeof toggle == \"undefined\") {\n                toggle = !isShow;\n            }\n\n            if (toggle) this.canvas.style.opacity = 1;\n\n            cStyle.display = toggle ? \"block\" : \"none\";\n            cStyle.left = cStyle.top = 0;\n            cStyle.width = cStyle.height = \"100%\";\n\n            if (toggle && cropRate) {\n                var cWidth = crop.clientWidth,\n                    cHeight = crop.clientHeight,\n                    curRate = parseFloat((cWidth / cHeight).toFixed(2));\n\n                if (curRate != cropRate) {\n                    if (curRate > cropRate) {\n                        cStyle.width = cHeight * cropRate + BORDER_PIX + 'px';\n                    } else {\n                        cStyle.height = cWidth / cropRate + BORDER_PIX + 'px';\n                    }\n                }\n            }\n\n            return toggle;\n        }\n\n        /**\n         * 2D canvas\n         * @param  {Number} left   \n         * @param  {Number} top    \n         * @param  {Number} width  \n         * @param  {Number} height \n         * @return {Object}        2D canvas\n         */\n\n    }, {\n        key: 'get2dCanvas',\n        value: function get2dCanvas() {\n            var left = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n            var top = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n            var width = arguments[2];\n            var height = arguments[3];\n\n            var c = document.createElement('canvas');\n            var picture = this.picture;\n\n            width = width || picture.width;\n            height = height || picture.height;\n\n            c.width = width;\n            c.height = height;\n\n            c.getContext('2d').drawImage(picture, left, top, width, height, 0, 0, width, height);\n\n            return c;\n        }\n\n        /**\n         * \n         * @return {Object} \n         */\n\n    }, {\n        key: 'getCropPosition',\n        value: function getCropPosition() {\n            var crop = this.crop;\n            var rate = this.picture.height / this.canvas.clientHeight;\n\n            if (crop.style.display == 'none') {\n                return {\n                    top: 0,\n                    left: 0,\n                    height: this.picture.height,\n                    width: this.picture.width\n                };\n            } else {\n                return {\n                    top: parseInt(crop.offsetTop * rate),\n                    left: parseInt(crop.offsetLeft * rate),\n                    height: parseInt((crop.offsetHeight - BORDER_PIX) * rate),\n                    width: parseInt((crop.offsetWidth - BORDER_PIX) * rate)\n                };\n            }\n        }\n\n        /**\n         * \n         */\n\n    }, {\n        key: 'setCrop',\n        value: function setCrop() {\n            var postion = this.getCropPosition();\n\n            this.confirm(this.get2dCanvas(postion.left, postion.top, postion.width, postion.height).toDataURL(this.output || this.file.type));\n        }\n\n        /**\n         * \n         * @param  {Number}  angle      \n         * @param  {Boolean} isTurnOver \n         */\n\n    }, {\n        key: 'rotate',\n        value: function rotate(angle, isTurnOver) {\n            var picture = this.picture;\n\n            this.canvas.style.opacity = 1;\n\n            var c = this.get2dCanvas(),\n                c2 = c.getContext('2d'),\n                pW = picture.width,\n                pH = picture.height,\n                cX = 0,\n                cY = 0,\n                type = void 0;\n\n            angle = angle % 360 + (angle < 0 ? 360 : 0);\n\n            if (angle > 0) {\n                var A = angle * Math.PI / 180,\n                    sinA = Math.abs(Math.sin(A).toFixed(2)),\n                    cosA = Math.abs(Math.cos(A).toFixed(2));\n\n                c.width = pH * sinA + pW * cosA;\n                c.height = pH * cosA + pW * sinA;\n\n                if (angle <= 90) {\n                    cX = pH * sinA * cosA;\n                    cY = -(pH * sinA * sinA);\n                } else if (angle > 90 && angle <= 180) {\n                    cX = -(pW * cosA * cosA);\n                    cY = -(pW * cosA * sinA + pH);\n                } else if (angle > 180 && angle <= 270) {\n                    cX = -(pH * cosA * sinA + pW);\n                    cY = -(pH * cosA * cosA);\n                } else {\n                    cX = -(pW * sinA * sinA);\n                    cY = -(pW * sinA * cosA);\n                }\n\n                c2.rotate(A);\n            }\n\n            c2.drawImage(picture, cX, cY);\n\n            if (isTurnOver) Object(__WEBPACK_IMPORTED_MODULE_3__utils__[\"e\" /* turnOver */])(c, isTurnOver);\n\n            this.confirm(c.toDataURL(this.output || this.file.type));\n        }\n\n        /**\n         * \n         * @param  {Number} brightness  -1~1\n         * @param  {Number} contrast    -1~1\n         * @param  {Number} saturation  -1~1\n         * @param  {Number} radius      -10~10\n         */\n\n    }, {\n        key: 'base',\n        value: function base() {\n            var brightness = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n            var contrast = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n            var saturation = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n            var radius = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\n            var canvas = this.canvas;\n\n            this.canvas.style.opacity = 1;\n\n            canvas.draw(canvas.texture(this.originImage)).brightnesscontrastSaturationBur([brightness, contrast, saturation, radius]).update();\n        }\n\n        /**\n         * \n         * @param  {Number} hue         \n         * @param  {Number} greenRed    \n         * @param  {Number} purpleGreen \n         * @param  {Number} yellowBlue  \n         */\n\n    }, {\n        key: 'huaColor',\n        value: function huaColor() {\n            var hue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n            var greenRed = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n            var purpleGreen = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n            var yellowBlue = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;\n\n            var canvas = this.canvas;\n\n            this.canvas.style.opacity = 1;\n\n            canvas.draw(canvas.texture(this.originImage)).hueColor([hue, greenRed, purpleGreen, yellowBlue]).update();\n        }\n\n        /**\n         * \n         * @param  {Number}  width  \n         * @param  {Number}  height \n         * @param  {Boolean} isBlob \n         * @return {Object}         \n         */\n\n    }, {\n        key: 'getData',\n        value: function getData(width, height, isBlob) {\n            var picture = this.picture;\n            var postion = this.getCropPosition();\n\n            var type = this.output || this.file.type,\n                c = this.get2dCanvas(postion.left, postion.top, postion.width, postion.height),\n                data = null;\n\n            width = width || picture.width;\n            height = height || picture.height;\n\n            if (width != postion.width || height != postion.height) {\n                data = Object(__WEBPACK_IMPORTED_MODULE_1__scale_js__[\"a\" /* scale */])({\n                    width: parseInt(width),\n                    height: parseInt(height)\n                }, c).toDataURL(type);\n            } else {\n                data = c.toDataURL(type);\n            }\n\n            if (isBlob) data = Object(__WEBPACK_IMPORTED_MODULE_3__utils__[\"a\" /* convertDataurlToBlob */])(data, type);\n\n            return data;\n        }\n\n        /**\n         * \n         * @param  {String}  fileName  \n         */\n\n    }, {\n        key: 'download',\n        value: function download(fileName) {\n            var originImage = this.originImage;\n\n            var aLink = document.createElement('a'),\n                evt = document.createEvent('MouseEvents'),\n                type = (this.output || this.file.type).split(\"/\")[1] || 'jpg',\n                width = originImage.width,\n                height = originImage.height;\n\n            aLink.href = window.URL.createObjectURL(this.getData(width, height, true));\n            aLink.download = fileName ? fileName + '.' + type : width + 'x' + height + '.' + type;\n\n            evt.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0);\n\n            aLink.dispatchEvent(evt);\n        }\n\n        /**\n         * \n         * @param  {Object} params \n         * @return {Object}        Promise\n         */\n\n    }, {\n        key: 'upload',\n        value: function upload(params) {\n            var formData = new FormData(),\n                formKey = params.formKey || 'fileToUpload',\n                options = {\n                url: params.url,\n                type: 'json',\n                data: formData\n            };\n\n            if (params.isOrigin) {\n                formData.append(formKey, this.file);\n            } else {\n                formData.append(formKey, this.getData(params.width, params.height, true));\n            }\n\n            return __WEBPACK_IMPORTED_MODULE_3__utils__[\"b\" /* http */].post(options);\n        }\n\n        /**\n         * \n         * @param  {Array} points \n         * @return \n         */\n\n    }, {\n        key: 'draw',\n        value: function draw(points) {\n            var lineStyle = this.lineStyle;\n\n            var c = this.get2dCanvas(),\n                c2 = c.getContext('2d');\n\n            c2.lineWidth = lineStyle.width;\n            c2.strokeStyle = lineStyle.color;\n            c2.lineJoin = lineStyle.join;\n\n            for (var i = 0, len = points.length; i < len - 1;) {\n                var p = points[i];\n                c2.beginPath();\n                c2.moveTo(p[0], p[1]);\n                p = points[++i];\n                c2.lineTo(p[0], p[1]);\n                c2.stroke();\n            }\n\n            this.picture.src = c.toDataURL(this.output || this.file.type);\n        }\n\n        /**\n         * /\n         * @param  {Boolean}    toggle /\n         * @param  {Object}     style  \n         * @return \n         */\n\n    }, {\n        key: 'toggleAdd',\n        value: function toggleAdd(toggle, style) {\n            var addition = this.addition;\n            var addStyle = addition.style;\n            var addContent = addition.getElementsByClassName('editor-add-content')[0];\n\n            if (toggle && addStyle.display === 'none') {\n                addContent.innerHTML = '';\n                addContent.style.width = '';\n                addContent.style.height = '';\n            }\n\n            if (style) {\n                for (var s in style) {\n                    if (s === 'src') continue;\n\n                    var ss = style[s];\n\n                    addStyle[s] = ss;\n\n                    if (s === 'font-size') addStyle['line-height'] = addStyle['min-height'] = ss;\n                }\n\n                if (style.src) {\n                    addContent.innerHTML = '<img src=\"' + style.src + '\" /><div class=\"editor-resize-handle\"></div>';\n                    addStyle['text-align'] = 'center';\n                    addContent.contentEditable = false;\n                } else {\n                    addStyle['text-align'] = 'left';\n                    addContent.contentEditable = true;\n                }\n            }\n\n            addStyle.display = toggle ? 'block' : 'none';\n            addStyle.left = 'calc(50% - ' + addition.offsetWidth / 2 + 'px)';\n            addStyle.top = 'calc(50% - ' + addition.offsetHeight / 2 + 'px)';\n            Object(__WEBPACK_IMPORTED_MODULE_3__utils__[\"d\" /* toggleClass */])(addition, 'active', true);\n        }\n\n        /**\n         * \n         * @return \n         */\n\n    }, {\n        key: 'commitAdd',\n        value: function commitAdd() {\n            var addition = this.addition,\n                addStyle = addition.style,\n                addContent = addition.getElementsByClassName('editor-add-content')[0],\n                img = addContent.getElementsByTagName('img')[0],\n                picture = this.picture,\n                rate = picture.height / this.canvas.clientHeight;\n\n            var c = this.get2dCanvas(),\n                c2 = c.getContext('2d');\n\n            if (img) {\n                c2.drawImage(img, (addition.offsetLeft + img.offsetLeft - 1) * rate, (addition.offsetTop - 1) * rate, img.width * rate, img.height * rate);\n            } else {\n                var content = addContent.innerText.split(/\\n(?!\\s*$)/g),\n                    addHeight = addition.clientHeight * rate,\n                    lineHeight = addHeight / content.length,\n                    x = (addition.offsetLeft - 1) * rate,\n                    y = (addition.offsetTop - 5) * rate + addHeight,\n                    params = ['font-style', 'font-variant', 'font-weight', 'font-size', 'font-family'],\n                    font = [];\n\n                for (var i = 0, len = params.length; i < len; ++i) {\n                    var p = params[i],\n                        s = addStyle[p];\n\n                    if (p === 'font-size') s = parseInt(parseInt(s) * rate) + 'px';\n                    if (s) font.push(s);\n                }\n\n                c2.font = font.join(' ');\n                c2.fillStyle = addStyle.color || '#000';\n\n                for (var _i = content.length - 1; _i >= 0; --_i) {\n                    c2.fillText(content[_i], x, y);\n                    y -= lineHeight;\n                }\n            }\n\n            this.confirm(c.toDataURL(this.output || this.file.type));\n        }\n    }]);\n\n    return PicTune;\n}();\n\n/* istanbul ignore if */\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (PicTune);\nif (typeof window !== 'undefined' && window.Vue) {\n    window.PicTune = PicTune;\n}\n\n/***/ }),\n\n/***/ 51:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(52);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(6)(\"62648508\", content, true, {});\n\n/***/ }),\n\n/***/ 52:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(5)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".image-editor-wrapper{user-select:none;position:relative;text-align:center;width:100%;min-height:400px;line-height:400px;overflow:hidden;background-color:#fff}.image-editor-source{position:relative;display:inline-block;max-width:90%;max-height:80%;vertical-align:middle;box-shadow:2px 2px 5px #666}.image-editor-picture{position:absolute;left:2px;top:2px;visibility:hidden}.image-editor-canvas,.image-editor-show{position:absolute;left:2px;top:2px;width:calc(100% - 4px);height:calc(100% - 4px)}.image-editor-crop{position:absolute;left:0;top:0;width:100%;height:100%;cursor:move}.image-editor-crop:before{position:absolute;content:\\\" \\\";left:-1px;top:-1px;width:100%;height:100%;border:1px solid #ff8181}.image-editor-crop:after{display:block;margin:1px;content:\\\" \\\";width:calc(100% - 4px);height:calc(100% - 4px);border:1px solid #ff8181}.image-editor-crop div{position:absolute;width:10px;height:10px;border-radius:10px;border:2px solid #f2060d;background-color:#e6b9b9}.editor-crop-left{left:-6px}.editor-crop-right{right:-6px}.editor-crop-top{top:-6px}.editor-crop-bottom{bottom:-6px}.editor-crop-left.editor-crop-top{cursor:nw-resize}.editor-crop-left.editor-crop-bottom{cursor:sw-resize}.editor-crop-right.editor-crop-top{cursor:ne-resize}.editor-crop-right.editor-crop-bottom{cursor:se-resize}.image-editor-addition{position:absolute;min-width:50px;max-width:100%;min-height:20px;line-height:20px;font-size:20px;border:1px dotted #333;text-align:left}.image-editor-addition>*{opacity:0}.image-editor-addition.active>*,.image-editor-addition:hover>*{opacity:1}.editor-add-operate{position:absolute;top:-20px;left:-1px;width:calc(100% + 2px);height:20px;background-color:#333;border-top-left-radius:2px;border-top-right-radius:2px;cursor:move}.editor-add-operate>div{display:inline-block;float:right;width:16px;height:16px;line-height:16px;margin:2px 2px 0 0;color:#fff;font-family:sans-serif;font-size:16px;font-weight:400;border-radius:2px;background-color:red;text-align:center;cursor:pointer}.editor-add-operate>div:hover{opacity:.8}.editor-add-content img{margin:0;max-width:80%;max-height:80%}.image-editor-addition:hover .editor-add-content{background:#fff}.editor-resize-handle{position:absolute;right:0;bottom:0;width:50px;height:50px;cursor:se-resize}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 53:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = scale;\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/**\n * High-quality scale function for canvas or image element\n * @param {Number|Object} scale\n * @param {Canvas|Image} input\n * @param {Canvas|String} [output]\n *   if Canvas or undefined, export by canvas\n *   if export == 'png', export by Image png\n *   if export == 'jpeg', export by Image jpeg\n *   if export == 'png-src', export by base64 png string\n *   if export == 'jpeg-src', export by base64 jpeg string\n * @param {Boolean} [inputRemovable]\n *   if not true, original canvas is kept\n *   if true, original canvas is not kept\n * @return {Canvas|String|Image|Boolean}\n *   if error, return false\n */\nfunction scale(scale, input, output, inputRemovable) {\n\tif (!input) {\n\t\tinput = scale.input;\n\t\toutput = scale.output;\n\t\tinputRemovable = scale.inputRemovable;\n\t\tif (scale.scale) scale = scale.scale;\n\t}\n\n\tvar HAS_ALPHA = true;\n\tvar canvas, ctx;\n\tif (input.src) {\n\t\tcanvas = document.createElement('canvas');\n\t\tif (input.naturalWidth != null) {\n\t\t\tcanvas.width = input.naturalWidth;\n\t\t\tcanvas.height = input.naturalHeight;\n\t\t} else if (input.runtimeStyle != null) {\n\t\t\tvar runtimeStyle = input.runtimeStyle,\n\t\t\t    mw = runtimeStyle.width,\n\t\t\t    mh = runtimeStyle.height;\n\t\t\truntimeStyle.width = 'auto';\n\t\t\truntimeStyle.height = 'auto';\n\t\t\tcanvas.width = input.width;\n\t\t\tcanvas.height = input.height;\n\t\t\truntimeStyle.width = mw;\n\t\t\truntimeStyle.height = mh;\n\t\t} else {\n\t\t\tvar mw = input.width,\n\t\t\t    mh = input.height;\n\t\t\tif (input.removeAttribute) {\n\t\t\t\tinput.removeAttribute('width');\n\t\t\t\tinput.removeAttribute('height');\n\t\t\t}\n\t\t\tcanvas.width = input.width;\n\t\t\tcanvas.height = input.height;\n\t\t\tinput.width = mw;\n\t\t\tinput.height = mh;\n\t\t}\n\t} else {\n\t\tcanvas = input;\n\t}\n\tctx = canvas.getContext('2d');\n\tif (input.src) ctx.drawImage(input, 0, 0);\n\tvar sw = canvas.width,\n\t    sh = canvas.height,\n\t    dw,\n\t    dh,\n\t    sourceBuffer = ctx.getImageData(0, 0, sw, sh).data;\n\n\tif (!sw || !sh) return false;\n\tif (input.src || inputRemovable) {\n\t\tcanvas.clearRect(0, 0, sw, sh);\n\t}\n\tif ((typeof scale === 'undefined' ? 'undefined' : _typeof(scale)) === 'object') {\n\t\tif (scale.width) {\n\t\t\tdw = scale.width + 0.5 | 0;\n\t\t\tdh = scale.height + 0.5 | 0;\n\t\t} else {\n\t\t\tdw = sw * scale.scaleX + 0.5 | 0;\n\t\t\tdh = sh * scale.scaleY + 0.5 | 0;\n\t\t}\n\t} else {\n\t\tdw = scale * sw + 0.5 | 0;\n\t\tdh = scale * sh + 0.5 | 0;\n\t}\n\tvar dw4 = dw << 2,\n\t    sw4 = sw << 2,\n\t    sx,\n\t    sy,\n\t    sindex = 0,\n\t    dx,\n\t    dy,\n\t    dyindex,\n\t    dindex = 0,\n\t    idx,\n\t    idy,\n\t    isx,\n\t    isy,\n\t    w,\n\t    wx,\n\t    nwx,\n\t    wy,\n\t    nwy,\n\t    crossX,\n\t    crossY,\n\t    dwh4 = dw4 * dh,\n\t    tmpBuffer,\n\t    r,\n\t    g,\n\t    b,\n\t    a,\n\t    dsy,\n\t    dsx,\n\t    newCanvas,\n\t    newCtx,\n\t    imageData,\n\t    byteBuffer,\n\t    TIMES = 255.99 / 255,\n\t    row0,\n\t    row1,\n\t    row2,\n\t    row3,\n\t    col0,\n\t    col1,\n\t    col2,\n\t    col3,\n\t    scaleX = dw / sw,\n\t    scaleY = dh / sh,\n\t    scaleXY = scaleX * scaleY;\n\n\tfunction setNewCanvas() {\n\t\t// CREATE downscale canvas\n\t\tif ((typeof output === 'undefined' ? 'undefined' : _typeof(output)) === 'object') {\n\t\t\tnewCanvas = output;\n\t\t} else if (input.src || inputRemovable) {\n\t\t\tnewCanvas = canvas;\n\t\t} else {\n\t\t\tnewCanvas = document.createElement('canvas');\n\t\t}\n\t\tnewCanvas.width = dw;\n\t\tnewCanvas.height = dh;\n\t\tnewCtx = newCanvas.getContext('2d');\n\t}\n\tfunction getImageData(tmpBuffer) {\n\t\tif (!tmpBuffer) {\n\t\t\treturn newCtx.getImageData(0, 0, dw, dh);\n\t\t} else {\n\t\t\tvar imageData = newCtx.getImageData(0, 0, dw, dh),\n\t\t\t    byteBuffer = imageData.data,\n\t\t\t    dindex;\n\t\t\tfor (dindex = 0; dindex < dwh4; dindex += 4) {\n\t\t\t\tbyteBuffer[dindex] = tmpBuffer[dindex] * TIMES | 0;\n\t\t\t\tbyteBuffer[dindex + 1] = tmpBuffer[dindex + 1] * TIMES | 0;\n\t\t\t\tbyteBuffer[dindex + 2] = tmpBuffer[dindex + 2] * TIMES | 0;\n\t\t\t\tbyteBuffer[dindex + 3] = HAS_ALPHA ? tmpBuffer[dindex + 3] * TIMES | 0 : 255;\n\t\t\t}\n\t\t\t// delete tmpBuffer\n\t\t\treturn imageData;\n\t\t}\n\t}\n\n\tif (scaleX > 1 || scaleY > 1) {\n\t\t// UPSCALE by bicubic\n\t\tvar bicubic = function bicubic(t, a, b, c, d) {\n\t\t\treturn 0.5 * (c - a + (2 * a - 5 * b + 4 * c - d + (3 * (b - c) + d - a) * t) * t) * t + b;\n\t\t};\n\n\t\tsetNewCanvas();\n\t\timageData = getImageData();\n\t\tbyteBuffer = imageData.data;\n\t\tfor (dy = 0; dy < dh; dy++) {\n\t\t\tsy = dy / scaleY;\n\t\t\tisy = sy | 0;\n\t\t\tdsy = sy - isy;\n\t\t\trow1 = isy * sw4;\n\t\t\trow0 = isy < 1 ? row1 : row1 - sw4;\n\t\t\tif (isy < sh - 2) {\n\t\t\t\trow2 = row1 + sw4;\n\t\t\t\trow3 = (isy + 2) * sw4;\n\t\t\t} else {\n\t\t\t\trow2 = row3 = isy > sh - 2 ? row1 : row1 + sw4;\n\t\t\t}\n\n\t\t\tfor (dx = 0; dx < dw; dx++, dindex += 4) {\n\t\t\t\tsx = dx / scaleX;\n\t\t\t\tisx = sx | 0;\n\t\t\t\tdsx = sx - isx;\n\t\t\t\tcol1 = isx << 2;\n\t\t\t\tcol0 = isx < 1 ? col1 : col1 - 4;\n\t\t\t\tif (isx < sw - 2) {\n\t\t\t\t\tcol2 = col1 + 4;\n\t\t\t\t\tcol3 = col1 + 8;\n\t\t\t\t} else {\n\t\t\t\t\tcol2 = col3 = isx > sw - 2 ? col1 : col1 + 4;\n\t\t\t\t}\n\n\t\t\t\t// RED\n\t\t\t\tr = bicubic(dsy, bicubic(dsx, sourceBuffer[row0 + col0], sourceBuffer[row0 + col1], sourceBuffer[row0 + col2], sourceBuffer[row0 + col3]), bicubic(dsx, sourceBuffer[row1 + col0], sourceBuffer[row1 + col1], sourceBuffer[row1 + col2], sourceBuffer[row1 + col3]), bicubic(dsx, sourceBuffer[row2 + col0], sourceBuffer[row2 + col1], sourceBuffer[row2 + col2], sourceBuffer[row2 + col3]), bicubic(dsx, sourceBuffer[row3 + col0], sourceBuffer[row3 + col1], sourceBuffer[row3 + col2], sourceBuffer[row3 + col3])) * TIMES | 0;\n\n\t\t\t\t// GREEN\n\t\t\t\t++col0, ++col1, ++col2, ++col3;\n\t\t\t\tg = bicubic(dsy, bicubic(dsx, sourceBuffer[row0 + col0], sourceBuffer[row0 + col1], sourceBuffer[row0 + col2], sourceBuffer[row0 + col3]), bicubic(dsx, sourceBuffer[row1 + col0], sourceBuffer[row1 + col1], sourceBuffer[row1 + col2], sourceBuffer[row1 + col3]), bicubic(dsx, sourceBuffer[row2 + col0], sourceBuffer[row2 + col1], sourceBuffer[row2 + col2], sourceBuffer[row2 + col3]), bicubic(dsx, sourceBuffer[row3 + col0], sourceBuffer[row3 + col1], sourceBuffer[row3 + col2], sourceBuffer[row3 + col3])) * TIMES | 0;\n\n\t\t\t\t// BLUE\n\t\t\t\t++col0, ++col1, ++col2, ++col3;\n\t\t\t\tb = bicubic(dsy, bicubic(dsx, sourceBuffer[row0 + col0], sourceBuffer[row0 + col1], sourceBuffer[row0 + col2], sourceBuffer[row0 + col3]), bicubic(dsx, sourceBuffer[row1 + col0], sourceBuffer[row1 + col1], sourceBuffer[row1 + col2], sourceBuffer[row1 + col3]), bicubic(dsx, sourceBuffer[row2 + col0], sourceBuffer[row2 + col1], sourceBuffer[row2 + col2], sourceBuffer[row2 + col3]), bicubic(dsx, sourceBuffer[row3 + col0], sourceBuffer[row3 + col1], sourceBuffer[row3 + col2], sourceBuffer[row3 + col3])) * TIMES | 0;\n\n\t\t\t\tbyteBuffer[dindex] = r >= 0 ? r < 256 ? r : 255 : 0;\n\t\t\t\tbyteBuffer[dindex + 1] = g >= 0 ? g < 256 ? g : 255 : 0;\n\t\t\t\tbyteBuffer[dindex + 2] = b >= 0 ? b < 256 ? b : 255 : 0;\n\n\t\t\t\tif (HAS_ALPHA) {\n\t\t\t\t\t// ALPHA\n\t\t\t\t\t++col0, ++col1, ++col2, ++col3;\n\t\t\t\t\ta = bicubic(dsy, bicubic(dsx, sourceBuffer[row0 + col0], sourceBuffer[row0 + col1], sourceBuffer[row0 + col2], sourceBuffer[row0 + col3]), bicubic(dsx, sourceBuffer[row1 + col0], sourceBuffer[row1 + col1], sourceBuffer[row1 + col2], sourceBuffer[row1 + col3]), bicubic(dsx, sourceBuffer[row2 + col0], sourceBuffer[row2 + col1], sourceBuffer[row2 + col2], sourceBuffer[row2 + col3]), bicubic(dsx, sourceBuffer[row3 + col0], sourceBuffer[row3 + col1], sourceBuffer[row3 + col2], sourceBuffer[row3 + col3])) * TIMES | 0;\n\t\t\t\t\tbyteBuffer[dindex + 3] = a >= 0 ? a < 256 ? a : 255 : 0;\n\t\t\t\t} else {\n\t\t\t\t\tbyteBuffer[dindex + 3] = 255;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// DOWNSCALE\n\t\tif (Float32Array) {\n\t\t\ttmpBuffer = new Float32Array(dwh4);\n\t\t} else {\n\t\t\ttmpBuffer = [];\n\t\t\tfor (dindex = 0; dindex < dwh4; ++dindex) {\n\t\t\t\ttmpBuffer[dindex] = 0;\n\t\t\t}\n\t\t}\n\t\t// CREATE float buffer\n\t\tfor (sy = 0; sy < sh; sy++) {\n\t\t\tdy = sy * scaleY;\n\t\t\tidy = dy | 0;\n\t\t\tdyindex = idy * dw4;\n\t\t\tcrossY = !!((idy - (dy + scaleY | 0)) * (sh - 1 - sy)) << 1;\n\t\t\tif (crossY) {\n\t\t\t\twy = idy + 1 - dy;\n\t\t\t\tnwy = dy + scaleY - idy - 1;\n\t\t\t}\n\t\t\tfor (sx = 0; sx < sw; sx++, sindex += 4) {\n\t\t\t\tdx = sx * scaleX;\n\t\t\t\tidx = dx | 0;\n\t\t\t\tdindex = dyindex + (idx << 2);\n\t\t\t\tcrossX = !!((idx - (dx + scaleX | 0)) * (sw - 1 - sx));\n\t\t\t\tif (crossX) {\n\t\t\t\t\twx = idx + 1 - dx;\n\t\t\t\t\tnwx = dx + scaleX - idx - 1;\n\t\t\t\t}\n\t\t\t\tr = sourceBuffer[sindex];\n\t\t\t\tg = sourceBuffer[sindex + 1];\n\t\t\t\tb = sourceBuffer[sindex + 2];\n\t\t\t\tif (HAS_ALPHA) a = sourceBuffer[sindex + 3];\n\t\t\t\tswitch (crossX + crossY) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\ttmpBuffer[dindex] += r * scaleXY;\n\t\t\t\t\t\ttmpBuffer[dindex + 1] += g * scaleXY;\n\t\t\t\t\t\ttmpBuffer[dindex + 2] += b * scaleXY;\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 3] += a * scaleXY;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tw = wx * scaleY;\n\t\t\t\t\t\ttmpBuffer[dindex] += r * w;\n\t\t\t\t\t\ttmpBuffer[dindex + 1] += g * w;\n\t\t\t\t\t\ttmpBuffer[dindex + 2] += b * w;\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 3] += a * w;\n\t\t\t\t\t\tw = nwx * scaleY;\n\t\t\t\t\t\ttmpBuffer[dindex + 4] += r * w;\n\t\t\t\t\t\ttmpBuffer[dindex + 5] += g * w;\n\t\t\t\t\t\ttmpBuffer[dindex + 6] += b * w;\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 7] += a * w;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tw = scaleX * wy;\n\t\t\t\t\t\ttmpBuffer[dindex] += r * w;\n\t\t\t\t\t\ttmpBuffer[dindex + 1] += g * w;\n\t\t\t\t\t\ttmpBuffer[dindex + 2] += b * w;\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 3] += a * w;\n\t\t\t\t\t\tw = scaleX * nwy;\n\t\t\t\t\t\tdindex += dw4;\n\t\t\t\t\t\ttmpBuffer[dindex] += r * w;\n\t\t\t\t\t\ttmpBuffer[dindex + 1] += g * w;\n\t\t\t\t\t\ttmpBuffer[dindex + 2] += b * w;\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 3] += a * w;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tw = wx * wy;\n\t\t\t\t\t\ttmpBuffer[dindex] += r * w;\n\t\t\t\t\t\ttmpBuffer[dindex + 1] += g * w;\n\t\t\t\t\t\ttmpBuffer[dindex + 2] += b * w;\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 3] += a * w;\n\t\t\t\t\t\tw = nwx * wy;\n\t\t\t\t\t\ttmpBuffer[dindex + 4] += r * w;\n\t\t\t\t\t\ttmpBuffer[dindex + 5] += g * w;\n\t\t\t\t\t\ttmpBuffer[dindex + 6] += b * w;\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 7] += a * w;\n\t\t\t\t\t\tw = wx * nwy;\n\t\t\t\t\t\tdindex += dw4;\n\t\t\t\t\t\ttmpBuffer[dindex] += r * w;\n\t\t\t\t\t\ttmpBuffer[dindex + 1] += g * w;\n\t\t\t\t\t\ttmpBuffer[dindex + 2] += b * w;\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 3] += a * w;\n\t\t\t\t\t\tw = nwx * nwy;\n\t\t\t\t\t\ttmpBuffer[dindex + 4] += r * w;\n\t\t\t\t\t\ttmpBuffer[dindex + 5] += g * w;\n\t\t\t\t\t\ttmpBuffer[dindex + 6] += b * w;\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 7] += a * w;\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// delete sourceBuffer\n\t\tsetNewCanvas();\n\t\timageData = getImageData(tmpBuffer);\n\t}\n\n\tnewCtx.putImageData(imageData, 0, 0);\n\tif (typeof output === 'string') {\n\t\tif (output === 'png' || output === 'jpeg') {\n\t\t\tvar img;\n\t\t\tif (inputRemovable && input.src) {\n\t\t\t\timg = input;\n\t\t\t} else {\n\t\t\t\timg = new Image();\n\t\t\t}\n\t\t\timg.width = dw;\n\t\t\timg.height = dh;\n\t\t\timg.src = newCanvas.toDataURL('image/' + output, 1);\n\t\t\treturn img;\n\t\t} else if (output === 'png-src' || output === 'jpeg-src') {\n\t\t\treturn newCanvas.toDataURL('image/' + output.split('-')[0], 1);\n\t\t}\n\t}\n\treturn newCanvas;\n} // scale function end\n\n/***/ }),\n\n/***/ 54:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return fx; });\n/*\n * glfx.js\n * http://evanw.github.com/glfx.js/\n *\n * Copyright 2011 Evan Wallace\n * Released under the MIT license\n */\n\nvar fx = function () {\n    var exports = {};\n    var gl;\n\n    function clamp(lo, value, hi) {\n        return Math.max(lo, Math.min(value, hi));\n    }\n\n    function wrapTexture(texture) {\n        return {\n            _: texture,\n            loadContentsOf: function loadContentsOf(element) {\n                // WebGL\n                gl = this._.gl;\n                this._.loadContentsOf(element);\n            },\n            destroy: function destroy() {\n                // WebGL\n                gl = this._.gl;\n                this._.destroy();\n            }\n        };\n    }\n\n    function texture(element) {\n        return wrapTexture(Texture.fromElement(element));\n    }\n\n    function initialize(width, height) {\n        var type = gl.UNSIGNED_BYTE;\n\n        // textures WindowsANGLEtextures\n        // Go for floating point buffer textures if we can, it'll make the bokeh\n        // filter look a lot better. Note that on Windows, ANGLE does not let you\n        // render to a floating-point texture when linear filtering is enabled.\n        // See http://crbug.com/172278 for more information.\n        if (gl.getExtension('OES_texture_float') && gl.getExtension('OES_texture_float_linear')) {\n            var testTexture = new Texture(100, 100, gl.RGBA, gl.FLOAT);\n            try {\n                // gl.FLOAT\n                testTexture.drawTo(function () {\n                    type = gl.FLOAT;\n                });\n            } catch (e) {}\n            testTexture.destroy();\n        }\n\n        if (this._.texture) this._.texture.destroy();\n        if (this._.spareTexture) this._.spareTexture.destroy();\n        this.width = width;\n        this.height = height;\n        this._.texture = new Texture(width, height, gl.RGBA, type);\n        this._.spareTexture = new Texture(width, height, gl.RGBA, type);\n        this._.extraTexture = this._.extraTexture || new Texture(0, 0, gl.RGBA, type);\n        this._.flippedShader = this._.flippedShader || new Shader(null, '\\\n\t        uniform sampler2D texture;\\\n\t        varying vec2 texCoord;\\\n\t        void main() {\\\n\t            gl_FragColor = texture2D(texture, vec2(texCoord.x, 1.0 - texCoord.y));\\\n\t        }\\\n\t    ');\n        this._.isInitialized = true;\n    }\n\n    /*\n      texturetexture\n    */\n    function draw(texture, width, height) {\n        if (!this._.isInitialized || texture._.width != this.width || texture._.height != this.height) {\n            initialize.call(this, width ? width : texture._.width, height ? height : texture._.height);\n        }\n\n        texture._.use();\n        this._.texture.drawTo(function () {\n            Shader.getDefaultShader().drawRect();\n        });\n\n        return this;\n    }\n\n    function update() {\n        this._.texture.use();\n        this._.flippedShader.drawRect();\n        return this;\n    }\n\n    function simpleShader(shader, uniforms, textureIn, textureOut) {\n        (textureIn || this._.texture).use();\n        this._.spareTexture.drawTo(function () {\n            shader.uniforms(uniforms).drawRect();\n        });\n        this._.spareTexture.swapWith(textureOut || this._.texture);\n    }\n\n    function replace(node) {\n        node.parentNode.insertBefore(this, node);\n        node.parentNode.removeChild(node);\n        return this;\n    }\n\n    function contents() {\n        var texture = new Texture(this._.texture.width, this._.texture.height, gl.RGBA, gl.UNSIGNED_BYTE);\n        this._.texture.use();\n        texture.drawTo(function () {\n            Shader.getDefaultShader().drawRect();\n        });\n        return wrapTexture(texture);\n    }\n\n    /*\n       Uint8: [r, g, b, a, r, g, b, a, ...]\n        width * height * 4.\n    */\n    function getPixelArray() {\n        var w = this._.texture.width;\n        var h = this._.texture.height;\n        var array = new Uint8Array(w * h * 4);\n        this._.texture.drawTo(function () {\n            gl.readPixels(0, 0, w, h, gl.RGBA, gl.UNSIGNED_BYTE, array);\n        });\n        return array;\n    }\n\n    function wrap(func) {\n        return function () {\n            // WebGL\n            gl = this._.gl;\n\n            // \n            return func.apply(this, arguments);\n        };\n    }\n\n    // from javax.media.jai.PerspectiveTransform\n\n    function getSquareToQuad(x0, y0, x1, y1, x2, y2, x3, y3) {\n        var dx1 = x1 - x2;\n        var dy1 = y1 - y2;\n        var dx2 = x3 - x2;\n        var dy2 = y3 - y2;\n        var dx3 = x0 - x1 + x2 - x3;\n        var dy3 = y0 - y1 + y2 - y3;\n        var det = dx1 * dy2 - dx2 * dy1;\n        var a = (dx3 * dy2 - dx2 * dy3) / det;\n        var b = (dx1 * dy3 - dx3 * dy1) / det;\n        return [x1 - x0 + a * x1, y1 - y0 + a * y1, a, x3 - x0 + b * x3, y3 - y0 + b * y3, b, x0, y0, 1];\n    }\n\n    function getInverse(m) {\n        var a = m[0],\n            b = m[1],\n            c = m[2];\n        var d = m[3],\n            e = m[4],\n            f = m[5];\n        var g = m[6],\n            h = m[7],\n            i = m[8];\n        var det = a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n        return [(e * i - f * h) / det, (c * h - b * i) / det, (b * f - c * e) / det, (f * g - d * i) / det, (a * i - c * g) / det, (c * d - a * f) / det, (d * h - e * g) / det, (b * g - a * h) / det, (a * e - b * d) / det];\n    }\n\n    function multiply(a, b) {\n        return [a[0] * b[0] + a[1] * b[3] + a[2] * b[6], a[0] * b[1] + a[1] * b[4] + a[2] * b[7], a[0] * b[2] + a[1] * b[5] + a[2] * b[8], a[3] * b[0] + a[4] * b[3] + a[5] * b[6], a[3] * b[1] + a[4] * b[4] + a[5] * b[7], a[3] * b[2] + a[4] * b[5] + a[5] * b[8], a[6] * b[0] + a[7] * b[3] + a[8] * b[6], a[6] * b[1] + a[7] * b[4] + a[8] * b[7], a[6] * b[2] + a[7] * b[5] + a[8] * b[8]];\n    }\n\n    function warpShader(uniforms, warp) {\n        return new Shader(null, uniforms + '\\\n\t    uniform sampler2D texture;\\\n\t    uniform vec2 texSize;\\\n\t    varying vec2 texCoord;\\\n\t    void main() {\\\n\t        vec2 coord = texCoord * texSize;\\\n\t        ' + warp + '\\\n\t        gl_FragColor = texture2D(texture, coord / texSize);\\\n\t        vec2 clampedCoord = clamp(coord, vec2(0.0), texSize);\\\n\t        if (coord != clampedCoord) {\\\n\t            /* fade to transparent if we are outside the image */\\\n\t            gl_FragColor.a *= max(0.0, 1.0 - length(coord - clampedCoord));\\\n\t        }\\\n\t    }');\n    }\n    /**\n     * @filter           Hue / Saturation\n     * @description      Provides rotational hue and multiplicative saturation control. RGB color space\n     *                   can be imagined as a cube where the axes are the red, green, and blue color\n     *                   values. Hue changing works by rotating the color vector around the grayscale\n     *                   line, which is the straight line from black (0, 0, 0) to white (1, 1, 1).\n     *                   Saturation is implemented by scaling all color channel values either toward\n     *                   or away from the average color channel value.\n     * @param hue        -1 to 1 (-1 is 180 degree rotation in the negative direction, 0 is no change,\n     *                   and 1 is 180 degree rotation in the positive direction)\n     * @param saturation -1 to 1 (-1 is solid gray, 0 is no change, and 1 is maximum contrast)\n     */\n    function hueColor(args) {\n        var hue = args[0],\n            greenRed = args[1],\n            purpleGreen = args[2],\n            yellowBlue = args[3];\n        gl.hueColor = gl.hueColor || new Shader(null, '\\\n\t        uniform sampler2D texture;\\\n\t        uniform float hue;\\\n\t        uniform float greenRed;\\\n\t        uniform float purpleGreen;\\\n\t        uniform float yellowBlue;\\\n\t        varying vec2 texCoord;\\\n\t        void main() {\\\n\t            vec4 color = texture2D(texture, texCoord);\\\n\t            \\\n\t            /* hue adjustment, wolfram alpha: RotationTransform[angle, {1, 1, 1}][{x, y, z}] */\\\n\t            float angle = hue * 3.14159265;\\\n\t            float s = sin(angle), c = cos(angle);\\\n\t            vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\\\n\t            float len = length(color.rgb);\\\n\t            color.rgb = vec3(\\\n\t                dot(color.rgb, weights.xyz),\\\n\t                dot(color.rgb, weights.zxy),\\\n\t                dot(color.rgb, weights.yzx)\\\n\t            );\\\n\t            color.r += greenRed; \\\n\t            color.g -= greenRed; \\\n\t            color.b -= greenRed; \\\n\t            color.r -= purpleGreen; \\\n\t            color.g += purpleGreen; \\\n\t            color.b -= purpleGreen; \\\n\t            color.r -= yellowBlue; \\\n\t            color.g -= yellowBlue; \\\n\t            color.b += yellowBlue; \\\n\t            gl_FragColor = color;\\\n\t        }\\\n\t    ');\n\n        simpleShader.call(this, gl.hueColor, {\n            hue: clamp(-1, hue, 1),\n            greenRed: clamp(-1, greenRed / 5, 1),\n            purpleGreen: clamp(-1, purpleGreen / 5, 1),\n            yellowBlue: clamp(-1, yellowBlue / 5, 1)\n        });\n\n        return this;\n    }\n\n    /**\n     * @filter           Brightness / Contrast/ Saturation / Blur\n     * @description      Provides additive brightness and multiplicative contrast control.\n     * @param brightness -1 to 1 (-1 is solid black, 0 is no change, and 1 is solid white)\n     * @param saturation -1 to 1 (-1 is solid gray, 0 is no change, and 1 is maximum contrast)\n     * @param contrast   -1 to 1 (-1 is solid gray, 0 is no change, and 1 is maximum contrast)\n     * @param radius The radius of the pyramid convolved with the image.\n     */\n    function brightnesscontrastSaturationBur(args) {\n        var brightness = args[0],\n            contrast = args[1],\n            saturation = args[2],\n            radius = args[3];\n        gl.brightnesscontrastSaturationBur = gl.brightnesscontrastSaturationBur || new Shader(null, '\\\n            uniform sampler2D texture;\\\n            uniform float brightness;\\\n            uniform float contrast;\\\n            uniform float saturation;\\\n            uniform vec2 delta;\\\n            varying vec2 texCoord;\\\n            ' + randomShaderFunc + '\\\n            void main() {\\\n                vec4 color = vec4(0.0);\\\n                float total = 0.0;\\\n                \\\n                /* randomize the lookup values to hide the fixed number of samples */\\\n                float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n                \\\n                for (float t = -30.0; t <= 30.0; t++) {\\\n                    float percent = (t + offset - 0.5) / 30.0;\\\n                    float weight = 1.0 - abs(percent);\\\n                    vec4 sample = texture2D(texture, texCoord + delta * percent);\\\n                    \\\n                    /* switch to pre-multiplied alpha to correctly blur transparent images */\\\n                    sample.rgb *= sample.a;\\\n                    \\\n                    color += sample * weight;\\\n                    total += weight;\\\n                    color.rgb += brightness;\\\n                    if (contrast > 0.0) {\\\n                        color.rgb = (color.rgb - 0.5) / (1.0 - contrast) + 0.5;\\\n                    } else {\\\n                        color.rgb = (color.rgb - 0.5) * (1.0 + contrast) + 0.5;\\\n                    }\\\n                    /* saturation adjustment */\\\n                    float average = (color.r + color.g + color.b) / 3.0;\\\n                    if (saturation > 0.0) {\\\n                        color.rgb += (average - color.rgb) * (1.0 - 1.0 / (1.001 - saturation));\\\n                    } else {\\\n                        color.rgb += (average - color.rgb) * (-saturation);\\\n                    }\\\n                }\\\n                \\\n                gl_FragColor = color / total;\\\n                \\\n                /* switch back from pre-multiplied alpha */\\\n                gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\\\n            }\\\n        ');\n\n        simpleShader.call(this, gl.brightnesscontrastSaturationBur, {\n            brightness: clamp(-1, brightness / 10, 1),\n            contrast: clamp(-1, contrast / 100, 1),\n            saturation: clamp(-1, saturation / 50, 1)\n        });\n        simpleShader.call(this, gl.brightnesscontrastSaturationBur, {\n            delta: [radius / this.width, 0]\n        });\n        simpleShader.call(this, gl.brightnesscontrastSaturationBur, {\n            delta: [0, radius / this.height]\n        });\n\n        return this;\n    }\n\n    // From: https://github.com/evanw/OES_texture_float_linear-polyfill\n    (function () {\n        // 2x2texture20\n        //texture,2 + 0 + 0 + 0/ 4 = 0.5\n        // Linear filtering is only supported if a sample taken\n        // from the center of that texture is (2 + 0 + 0 + 0) / 4 = 0.5.\n        function supportsOESTextureFloatLinear(gl) {\n            //  textures\n            if (!gl.getExtension('OES_texture_float')) {\n                return false;\n            }\n\n            // \n            var framebuffer = gl.createFramebuffer();\n            var byteTexture = gl.createTexture();\n            gl.bindTexture(gl.TEXTURE_2D, byteTexture);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n            gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, byteTexture, 0);\n\n            // 0.5Texture\n            var rgba = [2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n            var floatTexture = gl.createTexture();\n            gl.bindTexture(gl.TEXTURE_2D, floatTexture);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, gl.FLOAT, new Float32Array(rgba));\n\n            // \n            var program = gl.createProgram();\n            var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n            var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n            gl.shaderSource(vertexShader, '\\\n\t\t      attribute vec2 vertex;\\\n\t\t      void main() {\\\n\t\t        gl_Position = vec4(vertex, 0.0, 1.0);\\\n\t\t      }\\\n\t\t    ');\n            gl.shaderSource(fragmentShader, '\\\n\t\t      uniform sampler2D texture;\\\n\t\t      void main() {\\\n\t\t        gl_FragColor = texture2D(texture, vec2(0.5));\\\n\t\t      }\\\n\t\t    ');\n            gl.compileShader(vertexShader);\n            gl.compileShader(fragmentShader);\n            gl.attachShader(program, vertexShader);\n            gl.attachShader(program, fragmentShader);\n            gl.linkProgram(program);\n\n            // \n            var buffer = gl.createBuffer();\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0]), gl.STREAM_DRAW);\n            gl.enableVertexAttribArray(0);\n            gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\n\n            // \n            var pixel = new Uint8Array(4);\n            gl.useProgram(program);\n            gl.viewport(0, 0, 1, 1);\n            gl.bindTexture(gl.TEXTURE_2D, floatTexture);\n            gl.drawArrays(gl.POINTS, 0, 1);\n            gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel);\n\n            // 0.5\n            // The center sample will only have a value of 0.5 if linear filtering works\n            return pixel[0] === 127 || pixel[0] === 128;\n        }\n\n        // \n        function OESTextureFloatLinear() {}\n\n        // Cache the extension so it's specific to each context like extensions should be\n        // extension\n        function getOESTextureFloatLinear(gl) {\n            if (gl.$OES_texture_float_linear$ === void 0) {\n                Object.defineProperty(gl, '$OES_texture_float_linear$', {\n                    enumerable: false,\n                    configurable: false,\n                    writable: false,\n                    value: new OESTextureFloatLinear()\n                });\n            }\n            return gl.$OES_texture_float_linear$;\n        }\n\n        // getExtension()\n        function getExtension(name) {\n            return name === 'OES_texture_float_linear' ? getOESTextureFloatLinear(this) : oldGetExtension.call(this, name);\n        }\n\n        //  getSupportedExtensions()\n        function getSupportedExtensions() {\n            var extensions = oldGetSupportedExtensions.call(this);\n            if (extensions.indexOf('OES_texture_float_linear') === -1) {\n                extensions.push('OES_texture_float_linear');\n            }\n            return extensions;\n        }\n\n        // WebGL\n        try {\n            var gl = document.createElement('canvas').getContext('experimental-webgl');\n        } catch (e) {}\n\n        // WebGLpolyfill\n        if (!gl || gl.getSupportedExtensions().indexOf('OES_texture_float_linear') !== -1) {\n            return;\n        }\n\n        // texturespolyfill \n        if (supportsOESTextureFloatLinear(gl)) {\n            var oldGetExtension = WebGLRenderingContext.prototype.getExtension;\n            var oldGetSupportedExtensions = WebGLRenderingContext.prototype.getSupportedExtensions;\n            WebGLRenderingContext.prototype.getExtension = getExtension;\n            WebGLRenderingContext.prototype.getSupportedExtensions = getSupportedExtensions;\n        }\n    })();\n\n    exports.canvas = function () {\n        var canvas = document.createElement('canvas');\n        try {\n            gl = canvas.getContext('experimental-webgl', { premultipliedAlpha: false, preserveDrawingBuffer: true });\n        } catch (e) {\n            gl = null;\n        }\n        if (!gl) {\n            throw 'This browser does not support WebGL';\n        }\n        canvas._ = {\n            gl: gl,\n            isInitialized: false,\n            texture: null,\n            spareTexture: null,\n            flippedShader: null\n        };\n\n        // \n        canvas.texture = wrap(texture);\n        canvas.draw = wrap(draw);\n        canvas.update = wrap(update);\n        canvas.replace = wrap(replace);\n        canvas.contents = wrap(contents);\n        canvas.getPixelArray = wrap(getPixelArray);\n\n        // \n        canvas.brightnesscontrastSaturationBur = wrap(brightnesscontrastSaturationBur);\n        canvas.hueColor = wrap(hueColor);\n\n        return canvas;\n    };\n    // exports.splineInterpolate = splineInterpolate;\n\n    var Shader = function () {\n        function isArray(obj) {\n            return Object.prototype.toString.call(obj) == '[object Array]';\n        }\n\n        function isNumber(obj) {\n            return Object.prototype.toString.call(obj) == '[object Number]';\n        }\n\n        function compileSource(type, source) {\n            var shader = gl.createShader(type);\n            gl.shaderSource(shader, source);\n            gl.compileShader(shader);\n            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n                throw 'compile error: ' + gl.getShaderInfoLog(shader);\n            }\n            return shader;\n        }\n\n        var defaultVertexSource = '\\\n\t    attribute vec2 vertex;\\\n\t    attribute vec2 _texCoord;\\\n\t    varying vec2 texCoord;\\\n\t    void main() {\\\n\t        texCoord = _texCoord;\\\n\t        gl_Position = vec4(vertex * 2.0 - 1.0, 0.0, 1.0);\\\n\t    }';\n\n        var defaultFragmentSource = '\\\n\t    uniform sampler2D texture;\\\n\t    varying vec2 texCoord;\\\n\t    void main() {\\\n\t        gl_FragColor = texture2D(texture, texCoord);\\\n\t    }';\n\n        function Shader(vertexSource, fragmentSource) {\n            this.vertexAttribute = null;\n            this.texCoordAttribute = null;\n            this.program = gl.createProgram();\n            vertexSource = vertexSource || defaultVertexSource;\n            fragmentSource = fragmentSource || defaultFragmentSource;\n            fragmentSource = 'precision highp float;' + fragmentSource; // annoying requirement is annoying\n            gl.attachShader(this.program, compileSource(gl.VERTEX_SHADER, vertexSource));\n            gl.attachShader(this.program, compileSource(gl.FRAGMENT_SHADER, fragmentSource));\n            gl.linkProgram(this.program);\n            if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n                throw 'link error: ' + gl.getProgramInfoLog(this.program);\n            }\n        }\n\n        Shader.prototype.destroy = function () {\n            gl.deleteProgram(this.program);\n            this.program = null;\n        };\n\n        Shader.prototype.uniforms = function (uniforms) {\n            gl.useProgram(this.program);\n            for (var name in uniforms) {\n                if (!uniforms.hasOwnProperty(name)) continue;\n                var location = gl.getUniformLocation(this.program, name);\n                if (location === null) continue; // will be null if the uniform isn't used in the shader\n                var value = uniforms[name];\n                if (isArray(value)) {\n                    switch (value.length) {\n                        case 1:\n                            gl.uniform1fv(location, new Float32Array(value));\n                            break;\n                        case 2:\n                            gl.uniform2fv(location, new Float32Array(value));\n                            break;\n                        case 3:\n                            gl.uniform3fv(location, new Float32Array(value));\n                            break;\n                        case 4:\n                            gl.uniform4fv(location, new Float32Array(value));\n                            break;\n                        case 9:\n                            gl.uniformMatrix3fv(location, false, new Float32Array(value));\n                            break;\n                        case 16:\n                            gl.uniformMatrix4fv(location, false, new Float32Array(value));\n                            break;\n                        default:\n                            throw 'dont\\'t know how to load uniform \"' + name + '\" of length ' + value.length;\n                    }\n                } else if (isNumber(value)) {\n                    gl.uniform1f(location, value);\n                } else {\n                    throw 'attempted to set uniform \"' + name + '\" to invalid value ' + (value || 'undefined').toString();\n                }\n            }\n            // \n            return this;\n        };\n\n        // textures gl.uniform1f07\n        Shader.prototype.textures = function (textures) {\n            gl.useProgram(this.program);\n            for (var name in textures) {\n                if (!textures.hasOwnProperty(name)) continue;\n                gl.uniform1i(gl.getUniformLocation(this.program, name), textures[name]);\n            }\n            // \n            return this;\n        };\n\n        Shader.prototype.drawRect = function (left, top, right, bottom) {\n            var undefined;\n            var viewport = gl.getParameter(gl.VIEWPORT);\n            top = top !== undefined ? (top - viewport[1]) / viewport[3] : 0;\n            left = left !== undefined ? (left - viewport[0]) / viewport[2] : 0;\n            right = right !== undefined ? (right - viewport[0]) / viewport[2] : 1;\n            bottom = bottom !== undefined ? (bottom - viewport[1]) / viewport[3] : 1;\n            if (gl.vertexBuffer == null) {\n                gl.vertexBuffer = gl.createBuffer();\n            }\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.vertexBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([left, top, left, bottom, right, top, right, bottom]), gl.STATIC_DRAW);\n            if (gl.texCoordBuffer == null) {\n                gl.texCoordBuffer = gl.createBuffer();\n                gl.bindBuffer(gl.ARRAY_BUFFER, gl.texCoordBuffer);\n                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]), gl.STATIC_DRAW);\n            }\n            if (this.vertexAttribute == null) {\n                this.vertexAttribute = gl.getAttribLocation(this.program, 'vertex');\n                gl.enableVertexAttribArray(this.vertexAttribute);\n            }\n            if (this.texCoordAttribute == null) {\n                this.texCoordAttribute = gl.getAttribLocation(this.program, '_texCoord');\n                gl.enableVertexAttribArray(this.texCoordAttribute);\n            }\n            gl.useProgram(this.program);\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.vertexBuffer);\n            gl.vertexAttribPointer(this.vertexAttribute, 2, gl.FLOAT, false, 0, 0);\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.texCoordBuffer);\n            gl.vertexAttribPointer(this.texCoordAttribute, 2, gl.FLOAT, false, 0, 0);\n            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n        };\n\n        Shader.getDefaultShader = function () {\n            gl.defaultShader = gl.defaultShader || new Shader();\n            return gl.defaultShader;\n        };\n\n        return Shader;\n    }();\n\n    function SplineInterpolator(points) {\n        var n = points.length;\n        this.xa = [];\n        this.ya = [];\n        this.u = [];\n        this.y2 = [];\n\n        points.sort(function (a, b) {\n            return a[0] - b[0];\n        });\n        for (var i = 0; i < n; i++) {\n            this.xa.push(points[i][0]);\n            this.ya.push(points[i][1]);\n        }\n\n        this.u[0] = 0;\n        this.y2[0] = 0;\n\n        for (var i = 1; i < n - 1; ++i) {\n            //\n            // y2u\n            var wx = this.xa[i + 1] - this.xa[i - 1];\n            var sig = (this.xa[i] - this.xa[i - 1]) / wx;\n            var p = sig * this.y2[i - 1] + 2.0;\n\n            this.y2[i] = (sig - 1.0) / p;\n\n            var ddydx = (this.ya[i + 1] - this.ya[i]) / (this.xa[i + 1] - this.xa[i]) - (this.ya[i] - this.ya[i - 1]) / (this.xa[i] - this.xa[i - 1]);\n\n            this.u[i] = (6.0 * ddydx / wx - sig * this.u[i - 1]) / p;\n        }\n\n        this.y2[n - 1] = 0;\n\n        // \n        for (var i = n - 2; i >= 0; --i) {\n            this.y2[i] = this.y2[i] * this.y2[i + 1] + this.u[i];\n        }\n    }\n    SplineInterpolator.prototype.interpolate = function (x) {\n        var n = this.ya.length;\n        var klo = 0;\n        var khi = n - 1;\n\n        // We will find the right place in the table by means of\n        // bisection. This is optimal if sequential calls to this\n        // routine are at random values of x. If sequential calls\n        // are in order, and closely spaced, one would do better\n        // to store previous values of klo and khi.\n        //  x klokhi\n        while (khi - klo > 1) {\n            var k = khi + klo >> 1;\n\n            if (this.xa[k] > x) {\n                khi = k;\n            } else {\n                klo = k;\n            }\n        }\n\n        var h = this.xa[khi] - this.xa[klo];\n        var a = (this.xa[khi] - x) / h;\n        var b = (x - this.xa[klo]) / h;\n\n        // Cubic spline polynomial is now evaluated.\n        return a * this.ya[klo] + b * this.ya[khi] + ((a * a * a - a) * this.y2[klo] + (b * b * b - b) * this.y2[khi]) * (h * h) / 6.0;\n    };\n\n    var Texture = function () {\n        Texture.fromElement = function (element) {\n            var texture = new Texture(0, 0, gl.RGBA, gl.UNSIGNED_BYTE);\n            texture.loadContentsOf(element);\n            return texture;\n        };\n\n        function Texture(width, height, format, type) {\n            this.gl = gl;\n            this.id = gl.createTexture();\n            this.width = width;\n            this.height = height;\n            this.format = format;\n            this.type = type;\n\n            gl.bindTexture(gl.TEXTURE_2D, this.id);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            if (width && height) gl.texImage2D(gl.TEXTURE_2D, 0, this.format, width, height, 0, this.format, this.type, null);\n        }\n\n        Texture.prototype.loadContentsOf = function (element) {\n            this.width = element.width || element.videoWidth;\n            this.height = element.height || element.videoHeight;\n            gl.bindTexture(gl.TEXTURE_2D, this.id);\n            gl.texImage2D(gl.TEXTURE_2D, 0, this.format, this.format, this.type, element);\n        };\n\n        Texture.prototype.initFromBytes = function (width, height, data) {\n            this.width = width;\n            this.height = height;\n            this.format = gl.RGBA;\n            this.type = gl.UNSIGNED_BYTE;\n            gl.bindTexture(gl.TEXTURE_2D, this.id);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, this.type, new Uint8Array(data));\n        };\n\n        Texture.prototype.destroy = function () {\n            gl.deleteTexture(this.id);\n            this.id = null;\n        };\n\n        Texture.prototype.use = function (unit) {\n            gl.activeTexture(gl.TEXTURE0 + (unit || 0));\n            gl.bindTexture(gl.TEXTURE_2D, this.id);\n        };\n\n        Texture.prototype.unuse = function (unit) {\n            gl.activeTexture(gl.TEXTURE0 + (unit || 0));\n            gl.bindTexture(gl.TEXTURE_2D, null);\n        };\n\n        Texture.prototype.ensureFormat = function (width, height, format, type) {\n            // texture\n            if (arguments.length == 1) {\n                var texture = arguments[0];\n                width = texture.width;\n                height = texture.height;\n                format = texture.format;\n                type = texture.type;\n            }\n\n            // \n            if (width != this.width || height != this.height || format != this.format || type != this.type) {\n                this.width = width;\n                this.height = height;\n                this.format = format;\n                this.type = type;\n                gl.bindTexture(gl.TEXTURE_2D, this.id);\n                gl.texImage2D(gl.TEXTURE_2D, 0, this.format, width, height, 0, this.format, this.type, null);\n            }\n        };\n\n        Texture.prototype.drawTo = function (callback) {\n            //  texture\n            gl.framebuffer = gl.framebuffer || gl.createFramebuffer();\n            gl.bindFramebuffer(gl.FRAMEBUFFER, gl.framebuffer);\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.id, 0);\n            if (gl.checkFramebufferStatus(gl.FRAMEBUFFER) !== gl.FRAMEBUFFER_COMPLETE) {\n                throw new Error('incomplete framebuffer');\n            }\n            gl.viewport(0, 0, this.width, this.height);\n\n            // do the drawing\n            callback();\n\n            //  texture\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        };\n\n        var canvas = null;\n\n        function getCanvas(texture) {\n            if (canvas == null) {\n                canvas = document.createElement('canvas');\n            }\n            canvas.width = texture.width;\n            canvas.height = texture.height;\n            var c = canvas.getContext('2d');\n            c.clearRect(0, 0, canvas.width, canvas.height);\n            return c;\n        }\n\n        Texture.prototype.fillUsingCanvas = function (callback) {\n            callback(getCanvas(this));\n            this.format = gl.RGBA;\n            this.type = gl.UNSIGNED_BYTE;\n            gl.bindTexture(gl.TEXTURE_2D, this.id);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, canvas);\n            return this;\n        };\n\n        Texture.prototype.toImage = function (image) {\n            this.use();\n            Shader.getDefaultShader().drawRect();\n            var size = this.width * this.height * 4;\n            var pixels = new Uint8Array(size);\n            var c = getCanvas(this);\n            var data = c.createImageData(this.width, this.height);\n            gl.readPixels(0, 0, this.width, this.height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n            for (var i = 0; i < size; i++) {\n                data.data[i] = pixels[i];\n            }\n            c.putImageData(data, 0, 0);\n            image.src = canvas.toDataURL();\n        };\n\n        Texture.prototype.swapWith = function (other) {\n            var temp;\n            temp = other.id;\n            other.id = this.id;\n            this.id = temp;\n            temp = other.width;\n            other.width = this.width;\n            this.width = temp;\n            temp = other.height;\n            other.height = this.height;\n            this.height = temp;\n            temp = other.format;\n            other.format = this.format;\n            this.format = temp;\n        };\n\n        return Texture;\n    }();\n\n    //  0  1\n    var randomShaderFunc = '\\\n\t    float random(vec3 scale, float seed) {\\\n\t        /* use the fragment position for a different seed per-pixel */\\\n\t        return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\\\n\t    }\\\n\t';\n\n    return exports;\n}();\n\n/***/ }),\n\n/***/ 55:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export Query */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return http; });\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = turnOver;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = runFunction;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = convertDataurlToBlob;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = toggleClass;\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nvar Query = {\n    parse: function parse() {\n        var search = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : window.location.search;\n\n        if (!search) return {};\n\n        var queryString = search[0] === '?' ? search.substring(1) : search;\n        var query = {};\n\n        queryString.split('&').forEach(function (queryStr) {\n            var _queryStr$split = queryStr.split('='),\n                _queryStr$split2 = _slicedToArray(_queryStr$split, 2),\n                key = _queryStr$split2[0],\n                value = _queryStr$split2[1];\n\n            if (key) query[key] = value;\n        });\n\n        return query;\n    },\n    stringify: function stringify(query) {\n        var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '?';\n\n        var queryString = Object.keys(query).map(function (key) {\n            return key + '=' + encodeURIComponent(query[key] || '');\n        }).join('&');\n\n        return queryString ? prefix + queryString : '';\n    }\n};\n\nvar http = {\n    get: ajaxFactory('GET'),\n    post: ajaxFactory('POST')\n\n    /**\n     * [turnOver   ]\n     * @param  {[type]} oGC  [2d context]\n     * @param  {[type]} obj [img]\n     * @param  {[type]} iNow [45]\n     * @return {[type]} [description]\n     */\n};function turnOver(oC) {\n    var oGC = oC.getContext('2d'),\n        oImg = oGC.getImageData(0, 0, oC.width, oC.height),\n        newImg = oGC.createImageData(oC.width, oC.height);\n\n    var w = oImg.width,\n        h = oImg.height;\n\n    for (var i = 0; i < w; i++) {\n\n        for (var j = 0; j < h; j++) {\n            var color = getXY(oImg, i, j);\n\n            setXY(newImg, w - 1 - i, j, color);\n        }\n    }\n\n    oGC.putImageData(newImg, 0, 0);\n}\n\nfunction runFunction(fn, thisObj, args) {\n    if (fn && typeof fn === \"function\") {\n        var argus = arguments,\n            argsl = argus.length;\n\n        //1\n        if (argsl == 1) {\n            return fn.apply(window);\n        }\n\n        //2\n        if (argsl == 2) {\n            if (Array.isArray(thisObj)) {\n                return fn.apply(window, thisObj);\n            } else {\n                return fn.apply(thisObj);\n            }\n        }\n\n        //3\n        if (argsl == 3) {\n            return fn.apply(thisObj || window, args);\n        }\n    }\n}\n\n/**\n * base64urlBlob\n * @param  {String} urlData  urlbase64\n * @return {Object} Blob\n */\nfunction convertDataurlToBlob(urlData, type) {\n\n    //urlbyte\n    var bytes = window.atob(urlData.split(',')[1]);\n\n    //,ascii00\n    var ab = new ArrayBuffer(bytes.length);\n    var ia = new Uint8Array(ab);\n    for (var i = 0; i < bytes.length; i++) {\n        ia[i] = bytes.charCodeAt(i);\n    }\n\n    return new Blob([ab], {\n        type: type\n    });\n}\n\n/**\n * \n */\nfunction toggleClass(el, cls, toggle) {\n    var className = el.className,\n        reg = new RegExp('(^|\\\\s+)' + cls + '(?=\\\\s+|$)', 'g'),\n        isHas = !!className.match(reg),\n        isChange = false;\n\n    toggle = typeof toggle !== 'undefined' ? toggle : !isHas;\n\n    if (!toggle && isHas) {\n        el.className = className.replace(reg, '');\n        isChange = true;\n    } else if (toggle && !isHas) {\n        className = className.split(/\\s+/);\n        className.push(cls);\n        el.className = className.join(' ');\n        isChange = true;\n    }\n\n    return isChange;\n}\n\nfunction ajaxFactory(method) {\n    return function (options) {\n        var req = new XMLHttpRequest();\n\n        var url = options.url,\n            data = options.data,\n            body = null;\n\n        if (method === 'GET' && data) {\n            url += Query.stringify(data, url.indexOf('?') == -1 ? '?' : '&');\n        }\n\n        var p = new Promise(function (resolve, reject) {\n            req.addEventListener('load', function () {\n                var contentType = req.getResponseHeader('content-type');\n                var res = req.responseType != 'text' && req.responseType != '' ? req.response : req.responseText;\n\n                resolve(res);\n            });\n\n            req.addEventListener('error', function (error) {\n                return reject(error);\n            });\n        });\n\n        req.open(method, url, true);\n\n        if (method !== 'GET') {\n            if (data && data.append) {\n                body = data;\n            } else {\n                body = JSON.stringify(data);\n                req.setRequestHeader('Content-Type', 'application/json');\n            }\n        }\n\n        if (options.type) req.responseType = options.type;\n\n        req.send(body);\n        return p;\n    };\n}\n\n/**\n * [getXY   ]\n * @param  {[type]} obj  []\n * @param  {[type]} x [x]\n * @param  {[type]} y [y]\n * @param  {[type]} color [rgba]\n * @return {[type]} color [rgba]\n */\nfunction getXY(obj, x, y) {\n    //\n\n    var w = obj.width,\n        h = obj.height,\n        d = obj.data;\n\n    var color = [];\n\n    color[0] = d[4 * (y * w + x)];\n    color[1] = d[4 * (y * w + x) + 1];\n    color[2] = d[4 * (y * w + x) + 2];\n    color[3] = d[4 * (y * w + x) + 3];\n\n    return color;\n}\n\n/**\n * [setXY   ]\n * @param  {[type]} obj  []\n * @param  {[type]} x [x]\n * @param  {[type]} y [y]\n * @param  {[type]} color [rgba]\n * @return {[type]}          [description]\n */\nfunction setXY(obj, x, y, color) {\n    var w = obj.width,\n        h = obj.height,\n        d = obj.data;\n\n    d[4 * (y * w + x)] = color[0];\n    d[4 * (y * w + x) + 1] = color[1];\n    d[4 * (y * w + x) + 2] = color[2];\n    d[4 * (y * w + x) + 3] = color[3];\n}\n\n/***/ }),\n\n/***/ 6:\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\nvar listToStyles = __webpack_require__(49)\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nmodule.exports = function (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n\n\n/***/ })\n\n/******/ });\n});\n\n\n// WEBPACK FOOTER //\n// pic-tune.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 50);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 835fd1b2559dd66d43c8","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nmodule.exports = function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-style-loader@3.1.2@vue-style-loader/lib/listToStyles.js\n// module id = 49\n// module chunks = 0 1","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js\n// module id = 5\n// module chunks = 0 1","import './main.css';\nimport { scale } from './scale.js';\nimport { fx } from './glfx.js';\nimport { http, turnOver, runFunction, convertDataurlToBlob, toggleClass } from './utils';\n\n// \nconst BORDER_PIX = 4;\n\n// \nconst CACHES = [];\n\n/**\n * \n * @param  {Object} editorObj  \n * @return \n */\nfunction bindEvents( editorObj ) {\n    const wrapper = editorObj.wrapper;\n    const source = editorObj.source;\n    const picture = editorObj.picture;\n    const showImage = editorObj.showImage;\n    const canvas = editorObj.canvas;\n    const crop = editorObj.crop;\n    const addition = editorObj.addition;\n    const addOperate = addition.getElementsByClassName('editor-add-operate')[0];\n    const addContent = addition.getElementsByClassName('editor-add-content')[0];\n\n    let isMove = false,\n        isResize = false,\n        isDraw = false,\n        isAdd = false,\n        isContent = false,\n        maxPos = {\n            left: 0,\n            top: 0,\n            width: 0,\n            height: 0\n        },\n        curPoint = \"\",\n        moveTimer = 0;\n\n    const movePoints = crop.getElementsByTagName('div');\n    const pointDirection = ['lt', 'rt', 'lb', 'rb'];\n\n    crop.onmousedown = moveStart;\n    crop.addEventListener('touchstart', moveStart, false);\n\n    canvas.onmousedown = moveStart;\n    canvas.onmousemove = drawing;\n    canvas.addEventListener('touchstart', moveStart, false);\n    canvas.addEventListener('touchmove', drawing, false);\n\n    addOperate.onmousedown = moveStart;\n    addOperate.addEventListener('touchstart', moveStart, false);\n    addOperate.onclick = ( e ) => {\n        switch ( e.target.className ) {\n            case 'editor-add-cancel':\n                editorObj.toggleAdd(false);\n                break;\n        }\n    }\n\n    addContent.onmousedown = moveStart;\n    addContent.addEventListener('touchstart', moveStart, false);\n\n    wrapper.onmousemove = moveing;\n    wrapper.onmouseup = moveEnd;\n    wrapper.addEventListener('touchmove', moveing, false);\n    wrapper.addEventListener('touchend', moveEnd, false);\n\n    const curPos = {\n        pageLeft: 0,\n        pageTop: 0,\n        pageX: 0,\n        pageY: 0\n    };\n\n    const drawPoint = [];\n\n    function updatePos ( e ) {\n        let isTouch = !!e.type.match('touch');\n\n        if ( isTouch ) e = e.touches[0];\n\n        curPos.movementX = e.pageX - curPos.pageX;\n        curPos.movementY = e.pageY - curPos.pageY;\n\n        curPos.pageX = e.pageX;\n        curPos.pageY = e.pageY;\n    }\n\n    function drawing( e ) {\n        if ( !isDraw || !editorObj.drawable ) return;\n\n        let rate = picture.height / canvas.clientHeight,\n            x = (curPos.pageX - curPos.pageLeft) * rate,\n            y = (curPos.pageY - curPos.pageTop) * rate;\n\n\n        drawPoint.push([x, y]);\n        updatePos(e);\n\n        if ( drawPoint.length > 2 ) {\n            editorObj.draw(drawPoint);\n            drawPoint.shift();\n        }\n    }\n\n    function moveStart ( e ) {\n        let target = e.target;\n\n        maxPos.left = source.clientWidth - (crop.offsetWidth);\n        maxPos.top = source.clientHeight - (crop.offsetHeight);\n        maxPos.width = source.clientWidth,\n        maxPos.height = source.clientHeight;\n\n        updatePos(e);\n\n        switch ( target ) {\n            case canvas:\n                isDraw = true;\n                break;\n            case addOperate:\n                isAdd = true;\n                !toggleClass(addition, 'active', false) && editorObj.skip('-');\n                addition.style.display = 'block';\n                break;\n            case addContent.getElementsByClassName('editor-resize-handle')[0]:\n                isContent = true;\n                !toggleClass(addition, 'active', false) && editorObj.skip('-');\n                addition.style.display = 'block';\n                break;\n            default:\n                isMove = true;\n                for ( let i = 0, len = movePoints.length; i < len; ++i ) {\n                    if ( movePoints[i] === target ) {\n                        curPoint = pointDirection[i];\n                        isMove = false;\n                        isResize = true;\n                        break;\n                    }\n                }\n        }\n\n        clearTimeout(moveTimer);\n        moveTimer = setTimeout(moveEnd, 1000);\n    }\n\n    function moveing ( e ) {\n        updatePos(e);\n\n        let cropStyle = crop.style,\n            movementX = curPos.movementX,\n            movementY = curPos.movementY,\n            offsetLeft = crop.offsetLeft,\n            offsetTop = crop.offsetTop,\n            newLeft, newTop, newWidth, newHeight;\n\n        const cropRate = editorObj.cropRate;\n\n        if ( isMove ) {// \n            newLeft = offsetLeft + movementX;\n            newTop = offsetTop + movementY;\n\n            newLeft = newLeft < 0 ? 0 : (newLeft > maxPos.left ? maxPos.left : newLeft);\n            newTop = newTop < 0 ? 0 : (newTop > maxPos.top ? maxPos.top : newTop);\n\n            if ( newLeft != offsetLeft ) cropStyle.left = newLeft + \"px\";\n            if ( newTop != offsetTop ) cropStyle.top = newTop + \"px\";\n\n            runFunction(editorObj.onMovingCrop, editorObj, []);\n        } else if ( isResize ) {// \n            let offsetWidth = crop.offsetWidth,\n                offsetHeight = crop.offsetHeight;\n\n            if ( cropRate ) {\n                let sign = (curPoint == 'lt' || curPoint == \"rb\") ? 1 : -1;\n\n                if ( cropRate > 1 ) {\n                    movementX = sign * movementY * cropRate;\n                } else {\n                    movementY = sign * movementX / cropRate;\n                }\n            }\n\n            // \n            if ( curPoint.indexOf(\"l\") != -1 ) {\n                newLeft = offsetLeft + movementX;\n                newWidth = offsetWidth - movementX;\n\n                if ( newLeft < 0 ) {\n                    newWidth = newWidth + newLeft;\n                    newLeft = 0;\n\n                    if ( cropRate ) {\n                        newHeight = (newWidth - BORDER_PIX) / cropRate + BORDER_PIX;\n                    }\n                }\n\n            } else {\n                newWidth = offsetWidth + movementX;\n\n                if ( newWidth + offsetLeft > maxPos.width ) {\n                    newWidth = maxPos.width - offsetLeft;\n\n                    if ( cropRate ) {\n                        newHeight = (newWidth - BORDER_PIX) / cropRate + BORDER_PIX;\n                    }\n                }\n            }\n\n            // \n            if ( curPoint.indexOf(\"t\") != -1 && !newHeight ) {\n                newTop = offsetTop + movementY;\n                newHeight = offsetHeight - movementY;\n\n                if ( newTop < 0 ) {\n                    newHeight = newHeight + newTop;\n                    newTop = 0;\n\n                    if ( cropRate ) {\n                        newWidth = (newHeight - BORDER_PIX) * cropRate + BORDER_PIX;\n                    }\n                }\n            } else if ( !newHeight ) {\n                newHeight = offsetHeight + movementY;\n\n                if ( newHeight + offsetTop > maxPos.height ) {\n                    newHeight = maxPos.height - offsetTop;\n\n                    if ( cropRate ) {\n                        newWidth = (newHeight - BORDER_PIX) * cropRate + BORDER_PIX;\n                    }\n                }\n            }\n\n            if ( isNaN(newLeft) ) newLeft =  offsetLeft;\n            if ( isNaN(newTop) ) newTop = offsetTop;\n\n            if ( cropRate ) {\n                if ( newLeft + newWidth < maxPos.width ) {\n                    newHeight = (newWidth - BORDER_PIX) / cropRate + BORDER_PIX;\n                } else if ( newTop + newHeight < maxPos.height ) {\n                    newWidth = (newHeight - BORDER_PIX) * cropRate + BORDER_PIX;\n                }\n            }\n\n            if ( newLeft != offsetLeft ) cropStyle.left = newLeft + \"px\";\n            if ( newTop != offsetTop ) cropStyle.top = newTop + \"px\";\n            if ( newWidth != offsetWidth ) cropStyle.width = newWidth + \"px\";\n            if ( newHeight != offsetHeight ) cropStyle.height = newHeight + \"px\";\n\n            runFunction(editorObj.onMovingCrop, editorObj, []);\n        } else if ( isAdd ) {\n            let newLeft = addition.offsetLeft + curPos.movementX,\n                newTop = addition.offsetTop + curPos.movementY;\n\n            if ( newLeft < 0 ) {\n                newLeft = 0;\n            } else if ( newLeft + addition.offsetWidth > maxPos.width ) {\n                newLeft = maxPos.width - addition.offsetWidth;\n            }\n\n            if ( newTop < 0 ) {\n                newTop = 0;\n            } else if ( newTop + addition.offsetHeight > maxPos.height ) {\n                newTop = maxPos.height - addition.offsetHeight;\n            }\n\n            addition.style.left = newLeft + 'px';\n            addition.style.top = newTop + 'px';\n        } else if ( isContent ) {\n            let newWidth = addContent.offsetWidth,\n                newHeight = addContent.offsetHeight;\n\n            addContent.style.width = newWidth + movementX + 'px';\n            addContent.style.height = newHeight + movementY + 'px';\n        }\n\n        clearTimeout(moveTimer);\n        moveTimer = setTimeout(moveEnd, 1000);\n    }\n\n    function moveEnd () {\n        if ( isDraw ) {\n            editorObj.confirm();\n            drawPoint.length = 0;\n        }\n\n        if ( isAdd || isContent ) {\n            editorObj.commitAdd();\n            addition.style.display = 'block';\n        }\n\n        isMove = false;\n        isResize = false;\n        isDraw = false;\n        isAdd = false;\n        isContent = false;\n\n        clearTimeout(moveTimer);\n    }\n\n    picture.onload = function ( e ) {\n        adjustSize();\n\n        crop.style.display = \"none\";\n\n        canvas.draw(canvas.texture(this)).update();\n    }\n\n    picture.error = function ( e ) {\n        console.log(e);\n    }\n\n    window.onresize = function ( e ) {\n        adjustSize ();\n    }\n\n    function adjustSize () {\n        let pWidth = picture.width,\n            pHeight = picture.height,\n            pRate = parseFloat((pWidth / pHeight).toFixed(2));\n\n        let sStyle = source.style,\n            cStyle = crop.style;\n\n        sStyle.width = pWidth + BORDER_PIX + \"px\";\n        sStyle.height = pHeight + BORDER_PIX + \"px\";\n\n        let sWidth = source.clientWidth - BORDER_PIX,\n            sHeight = source.clientHeight - BORDER_PIX,\n            sRate = parseFloat((sWidth / sHeight).toFixed(2));\n\n        // \n        if ( pRate != sRate ) {\n            if ( sRate > pRate ) {\n                sStyle.width = sHeight * pRate + BORDER_PIX + \"px\";\n            } else {\n                sStyle.height = sWidth / pRate + BORDER_PIX + \"px\";\n            }\n        }\n\n        curPos.pageTop = getTop(canvas);\n        curPos.pageLeft = getLeft(canvas);\n\n        if ( cStyle.display == 'block' ) {\n            const cropRate = editorObj.cropRate;\n\n            cStyle.left = cStyle.top = 0;\n            cStyle.width = cStyle.height = \"100%\";\n\n            if ( cropRate && pRate != cropRate ) {\n                if ( pRate > cropRate ) {\n                    cStyle.width = crop.clientHeight * cropRate + BORDER_PIX + 'px';\n                } else {\n                    cStyle.height = crop.clientWidth / cropRate + BORDER_PIX + 'px';\n                }\n            }\n\n            runFunction(editorObj.onMovingCrop, editorObj, []);\n        }\n    }\n\n    function getTop ( e ) { \n        let offset = e.offsetTop; \n        if ( e.offsetParent ) offset += getTop(e.offsetParent);\n        return offset; \n    } \n\n    function getLeft ( e ){ \n        let offset=e.offsetLeft; \n        if ( e.offsetParent ) offset += getLeft(e.offsetParent); \n        return offset; \n    }\n}\n\nexport default class PicTune {\n    constructor(options = {}) {\n        Object.assign(this, {\n            id: '',\n            element: '',\n            width: '',\n            height: '400px',\n            url: '',\n            output: '',\n            file: {},\n            lineStyle: {\n                width: 1,\n                color: '#000',\n                join: 'round'\n            },\n            version: -1,\n            drawable: false,\n            onMovingCrop () {},\n        }, options);\n\n        const wrapper = this.element || document.getElementById(this.id);\n        const source = document.createElement('div');\n        const picture = document.createElement('img');\n        const showImage = document.createElement('img');\n        const canvas = fx.canvas();\n        const addition = document.createElement('div');\n        const crop = document.createElement('div');\n        const originImage = new Image();\n\n        this.wrapper = wrapper;\n        this.source = source;\n        this.picture = picture;\n        this.showImage = showImage;\n        this.canvas = canvas;\n        this.addition = addition;\n        this.crop = crop;\n        this.originImage = originImage;\n\n        wrapper.className = 'image-editor-wrapper';\n\n        source.className = 'image-editor-source';\n\n        picture.className = 'image-editor-picture';\n\n        showImage.className = 'image-editor-show';\n\n        canvas.className = 'image-editor-canvas';\n        canvas.innerText = 'HTML5.';\n        \n        addition.className = 'image-editor-addition';\n        addition.style.display = \"none\";\n        addition.innerHTML = \n            '<div class=\"editor-add-content\" contentEditable=\"true\"></div>' + \n            '<div class=\"editor-add-operate\">' +\n                '<div class=\"editor-add-cancel\"></div>' + \n            '</div>';\n\n        crop.className = 'image-editor-crop';\n        crop.style.display = \"none\";\n        crop.innerHTML = \n            '<div class=\"editor-crop-left editor-crop-top\"></div>' +\n            '<div class=\"editor-crop-right editor-crop-top\"></div>' +\n            '<div class=\"editor-crop-left editor-crop-bottom\"></div>' +\n            '<div class=\"editor-crop-right editor-crop-bottom\"></div>';\n\n        source.appendChild(picture);\n        source.appendChild(showImage);\n        source.appendChild(canvas);\n        source.appendChild(addition);\n        source.appendChild(crop);\n\n        wrapper.appendChild(source);\n\n        if ( this.width ) wrapper.style.width = this.width;\n        if ( this.height ) {\n            wrapper.style.height = this.height;\n            wrapper.style['line-height'] = this.height;\n        }\n\n        bindEvents(this);\n\n        if ( options.url ) this.loadAsUrl( options.url );\n    }\n\n    /**\n     * http\n     * @param  {String} url http\n     * @return {Object}     Promise\n     */\n    loadAsUrl ( url ) {\n        return http.get({\n                url: url,\n                type: 'blob'\n            })\n            .then(data => this.loadAsFile(data));\n\n    }\n\n    /**\n     * \n     * @param  {Object} file blob\n     * @return {Object}      Promise\n     */\n    loadAsFile ( file ) {\n        const fr = new FileReader();\n        const p = new Promise((resolve, reject) => {\n            fr.onload = ( e ) => {\n                CACHES.length = 0;\n                this.version = -1;\n\n                this.confirm(fr.result);\n                this.file = file;\n\n                this.canvas.style.opacity = file.type == \"image/gif\" ? 0 : 1;\n\n                resolve(fr.result);\n            };\n\n        });\n\n        fr.readAsDataURL(file);\n\n        return p;\n    }\n\n    /**\n     * \n     * @param  {String} dataurl \n     * @return \n     */\n    confirm ( dataurl ) {\n        dataurl = dataurl || this.canvas.toDataURL(this.output || this.file.type);\n\n        if ( this.version > -1 ) {\n            CACHES.length = this.version + 1;\n            this.version = -1;\n        }\n\n        CACHES.push(dataurl);\n\n        this.picture.src = dataurl;\n        this.originImage.src = dataurl;\n        this.showImage.src = dataurl;\n\n        this.addition.style.display = 'none';\n    }\n\n    /**\n     * \n     * @return \n     */\n    reset () {\n        this.picture.src = this.originImage.src;\n        this.addition.style.display = 'none';\n    }\n\n    /**\n     * \n     * @param  {String} idx \"+\"\"-\"\n     * @return \n     */\n    skip ( idx ) {\n        let dataurl;\n\n        switch ( idx ) {\n            case \"+\":\n                if ( this.version !== -1 && ++ this.version < CACHES.length ) dataurl = CACHES[this.version];\n\n                if ( this.version === CACHES.length ) this.version = -1;\n                break;\n            case \"-\":\n                if ( this.version > 0 ) {\n                    -- this.version;\n                } else if ( CACHES.length > 1 ) {\n                    this.version = CACHES.length - 2;\n                }\n\n                dataurl = CACHES[this.version];\n                break;\n            default:\n                dataurl = CACHES[idx];\n        }\n\n        if ( dataurl ) {\n            this.picture.src = dataurl;\n            this.originImage.src = dataurl;\n            this.showImage.src = dataurl;\n            this.addition.style.display = 'none';\n        }\n    }\n\n    /**\n     * \n     * @return {Object} \n     */\n    getSize () {\n        const canvas = this.canvas;\n\n        return {\n            width: canvas.width,\n            height: canvas.height\n        }\n    }\n\n    /**\n     * /\n     * @param  {Boolean} toggle /\n     * @param  {Number}  rate   \n     * @return {Boolean}        /\n     */\n    toggleCrop ( toggle, rate ) {\n        const crop = this.crop;\n        const cropRate = this.cropRate = parseFloat((rate || 0).toFixed(2));\n\n        let cStyle = crop.style,\n            isShow = cStyle.display == \"block\";\n\n        if ( typeof toggle == \"undefined\" ) {\n            toggle = !isShow;\n        }\n\n        if ( toggle ) this.canvas.style.opacity = 1;\n\n        cStyle.display = toggle ? \"block\" : \"none\";\n        cStyle.left = cStyle.top = 0;\n        cStyle.width = cStyle.height = \"100%\";\n\n        if ( toggle && cropRate ) {\n            let cWidth = crop.clientWidth,\n                cHeight = crop.clientHeight,\n                curRate = parseFloat((cWidth / cHeight).toFixed(2));\n\n            if ( curRate != cropRate ) {\n                if ( curRate > cropRate ) {\n                    cStyle.width = cHeight * cropRate + BORDER_PIX + 'px';\n                } else {\n                    cStyle.height = cWidth / cropRate + BORDER_PIX + 'px';\n                }\n            }\n        }\n\n        return toggle;\n    }\n\n    /**\n     * 2D canvas\n     * @param  {Number} left   \n     * @param  {Number} top    \n     * @param  {Number} width  \n     * @param  {Number} height \n     * @return {Object}        2D canvas\n     */\n    get2dCanvas(left = 0, top = 0, width, height) {\n        const c = document.createElement('canvas');\n        const picture = this.picture;\n\n        width = width || picture.width;\n        height = height || picture.height;\n\n        c.width = width;\n        c.height = height;\n\n        c.getContext('2d').drawImage(picture, left, top, width, height, 0, 0, width, height);\n\n        return c;\n    }\n\n    /**\n     * \n     * @return {Object} \n     */\n    getCropPosition () {\n        const crop = this.crop;\n        const rate = this.picture.height / this.canvas.clientHeight;\n\n        if ( crop.style.display == 'none' ) {\n            return {\n                top: 0,\n                left: 0,\n                height: this.picture.height,\n                width: this.picture.width\n            }\n        } else {\n            return {\n                top: parseInt(crop.offsetTop * rate),\n                left: parseInt(crop.offsetLeft * rate),\n                height: parseInt((crop.offsetHeight - BORDER_PIX) * rate),\n                width: parseInt((crop.offsetWidth - BORDER_PIX) * rate)\n            }\n        }\n    }\n\n    /**\n     * \n     */\n    setCrop () {\n        const postion = this.getCropPosition();\n\n        this.confirm(this.get2dCanvas(postion.left, postion.top, postion.width, postion.height).toDataURL(this.output || this.file.type));\n    }\n\n    /**\n     * \n     * @param  {Number}  angle      \n     * @param  {Boolean} isTurnOver \n     */\n    rotate ( angle, isTurnOver ) {\n        const picture = this.picture;\n\n        this.canvas.style.opacity = 1;\n\n        let c = this.get2dCanvas(),\n            c2 = c.getContext('2d'),\n            pW = picture.width,\n            pH = picture.height,\n            cX = 0, \n            cY = 0,\n            type;\n\n        angle = angle % 360 + ( angle < 0 ? 360 : 0 );\n\n        if ( angle > 0 ) {\n            let A = angle * Math.PI / 180,\n                sinA = Math.abs(Math.sin(A).toFixed(2)),\n                cosA = Math.abs(Math.cos(A).toFixed(2));\n\n            c.width = pH * sinA + pW * cosA;\n            c.height = pH * cosA + pW * sinA;\n\n            if ( angle <= 90 ) {\n                cX = pH * sinA * cosA;\n                cY = -(pH * sinA * sinA);\n            } else if ( angle > 90 && angle <= 180 ) {\n                cX = -(pW * cosA * cosA);\n                cY = -(pW * cosA * sinA + pH);\n            } else if ( angle > 180 && angle <= 270  ) {\n                cX = -(pH * cosA * sinA + pW);\n                cY = -(pH * cosA * cosA);\n            } else {\n                cX = -(pW * sinA * sinA);\n                cY = -(pW * sinA * cosA);\n            }\n\n\n            c2.rotate(A);\n        }\n\n        c2.drawImage(picture, cX, cY);\n\n        if ( isTurnOver ) turnOver(c, isTurnOver);\n\n        this.confirm(c.toDataURL(this.output || this.file.type));\n    }\n\n    /**\n     * \n     * @param  {Number} brightness  -1~1\n     * @param  {Number} contrast    -1~1\n     * @param  {Number} saturation  -1~1\n     * @param  {Number} radius      -10~10\n     */\n    base ( brightness = 0, contrast = 0, saturation = 0, radius = 0 ) {\n        const canvas = this.canvas;\n\n        this.canvas.style.opacity = 1;\n\n        canvas.draw(canvas.texture(this.originImage)).brightnesscontrastSaturationBur([brightness, contrast, saturation, radius]).update();\n    }\n\n    /**\n     * \n     * @param  {Number} hue         \n     * @param  {Number} greenRed    \n     * @param  {Number} purpleGreen \n     * @param  {Number} yellowBlue  \n     */\n    huaColor ( hue = 0, greenRed = 0, purpleGreen = 0, yellowBlue = 0 ) {\n        const canvas = this.canvas;\n\n        this.canvas.style.opacity = 1;\n\n        canvas.draw(canvas.texture(this.originImage)).hueColor([hue, greenRed, purpleGreen, yellowBlue]).update();\n    }\n\n    /**\n     * \n     * @param  {Number}  width  \n     * @param  {Number}  height \n     * @param  {Boolean} isBlob \n     * @return {Object}         \n     */\n    getData ( width, height, isBlob ) {\n        const picture = this.picture;\n        const postion = this.getCropPosition();\n\n        let type = this.output || this.file.type,\n            c = this.get2dCanvas(postion.left, postion.top, postion.width, postion.height),\n            data = null;\n\n        width = width || picture.width;\n        height = height || picture.height;\n\n        if ( width != postion.width || height != postion.height ) {\n            data = scale({\n                width: parseInt(width),\n                height: parseInt(height),\n            }, c).toDataURL(type);\n        } else {\n            data = c.toDataURL(type);\n        }\n\n        if ( isBlob ) data = convertDataurlToBlob(data, type);\n\n        return data;\n    }\n\n    /**\n     * \n     * @param  {String}  fileName  \n     */\n    download ( fileName ) {\n        const originImage = this.originImage;\n\n        let aLink = document.createElement('a'),\n            evt = document.createEvent('MouseEvents'),\n            type = (this.output || this.file.type).split(\"/\")[1] || 'jpg',\n            width = originImage.width,\n            height = originImage.height;\n\n        aLink.href = window.URL.createObjectURL(this.getData(width, height, true));\n        aLink.download = fileName ? `${fileName}.${type}` : `${width}x${height}.${type}`;\n\n        evt.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0);\n\n        aLink.dispatchEvent(evt);\n    }\n\n    /**\n     * \n     * @param  {Object} params \n     * @return {Object}        Promise\n     */\n    upload ( params ) {\n        let formData = new FormData(),\n            formKey = params.formKey || 'fileToUpload',\n            options = {\n            url: params.url,\n            type: 'json',\n            data: formData\n        };\n\n        if ( params.isOrigin ) {\n            formData.append(formKey, this.file);\n        } else {\n            formData.append(formKey, this.getData(params.width, params.height, true));\n        }\n\n        return http.post(options);\n    }\n\n    /**\n     * \n     * @param  {Array} points \n     * @return \n     */\n    draw ( points ) {\n        const lineStyle = this.lineStyle;\n\n        let c = this.get2dCanvas(),\n            c2 = c.getContext('2d');\n\n        c2.lineWidth = lineStyle.width;\n        c2.strokeStyle = lineStyle.color;\n        c2.lineJoin = lineStyle.join;\n\n        for ( var i = 0, len = points.length; i < len - 1; ) {\n            let p = points[i];\n            c2.beginPath();  \n            c2.moveTo(p[0],p[1]);\n            p = points[++i];  \n            c2.lineTo(p[0],p[1]);  \n            c2.stroke();\n        }\n\n        this.picture.src = c.toDataURL(this.output || this.file.type);\n    }\n\n    /**\n     * /\n     * @param  {Boolean}    toggle /\n     * @param  {Object}     style  \n     * @return \n     */\n    toggleAdd ( toggle, style ) {\n        const addition = this.addition;\n        const addStyle = addition.style;\n        const addContent = addition.getElementsByClassName('editor-add-content')[0];\n\n        if ( toggle && addStyle.display === 'none' ) {\n            addContent.innerHTML = '';\n            addContent.style.width = '';\n            addContent.style.height = '';\n        }\n\n        if ( style ) {\n            for ( let s in style ) {\n                if ( s === 'src' ) continue;\n\n                let ss = style[s];\n\n                addStyle[s] = ss;\n\n                if ( s === 'font-size' ) addStyle['line-height'] = addStyle['min-height'] = ss;\n            }\n\n            if ( style.src ) {\n                addContent.innerHTML = `<img src=\"${style.src}\" /><div class=\"editor-resize-handle\"></div>`;\n                addStyle['text-align'] = 'center';\n                addContent.contentEditable = false;\n            } else {\n                addStyle['text-align'] = 'left';\n                addContent.contentEditable = true;\n            }\n        }\n\n        addStyle.display = toggle ? 'block' : 'none';\n        addStyle.left = `calc(50% - ${addition.offsetWidth/2}px)`;\n        addStyle.top = `calc(50% - ${addition.offsetHeight/2}px)`;\n        toggleClass(addition, 'active', true);\n    }\n\n    /**\n     * \n     * @return \n     */\n    commitAdd () {\n        let addition = this.addition,\n            addStyle = addition.style,\n            addContent = addition.getElementsByClassName('editor-add-content')[0],\n            img = addContent.getElementsByTagName('img')[0],\n            picture = this.picture,\n            rate = picture.height / this.canvas.clientHeight;\n\n        let c = this.get2dCanvas(),\n            c2 = c.getContext('2d');\n\n        if ( img ) {\n            c2.drawImage(img, (addition.offsetLeft + img.offsetLeft - 1) * rate, (addition.offsetTop - 1) * rate, img.width * rate, img.height * rate);\n        } else {\n            let content = addContent.innerText.split(/\\n(?!\\s*$)/g),\n                addHeight = addition.clientHeight * rate,\n                lineHeight = addHeight / content.length,\n                x = (addition.offsetLeft - 1) * rate,\n                y = (addition.offsetTop - 5) * rate + addHeight,\n                params = ['font-style', 'font-variant', 'font-weight', 'font-size', 'font-family'],\n                font = [];\n\n            for ( let i = 0, len = params.length; i < len; ++i ) {\n                let p = params[i],\n                    s = addStyle[p];\n\n                if ( p === 'font-size' ) s = parseInt(parseInt(s) * rate) + 'px';\n                if ( s ) font.push(s);\n            }\n\n            c2.font = font.join(' ');\n            c2.fillStyle = addStyle.color || '#000';\n\n            for ( let i = content.length - 1; i >= 0; --i ) {\n                c2.fillText(content[i], x, y);\n                y -= lineHeight;\n            }\n        }\n\n        this.confirm(c.toDataURL(this.output || this.file.type));\n    }\n}\n\n/* istanbul ignore if */\nif (typeof window !== 'undefined' && window.Vue) {\n    window.PicTune = PicTune;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/picTune/index.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/_css-loader@0.28.11@css-loader/index.js!./main.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/_vue-style-loader@3.1.2@vue-style-loader/lib/addStylesClient.js\")(\"62648508\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/picTune/main.css\n// module id = 51\n// module chunks = 0 1","exports = module.exports = require(\"../../node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".image-editor-wrapper{user-select:none;position:relative;text-align:center;width:100%;min-height:400px;line-height:400px;overflow:hidden;background-color:#fff}.image-editor-source{position:relative;display:inline-block;max-width:90%;max-height:80%;vertical-align:middle;box-shadow:2px 2px 5px #666}.image-editor-picture{position:absolute;left:2px;top:2px;visibility:hidden}.image-editor-canvas,.image-editor-show{position:absolute;left:2px;top:2px;width:calc(100% - 4px);height:calc(100% - 4px)}.image-editor-crop{position:absolute;left:0;top:0;width:100%;height:100%;cursor:move}.image-editor-crop:before{position:absolute;content:\\\" \\\";left:-1px;top:-1px;width:100%;height:100%;border:1px solid #ff8181}.image-editor-crop:after{display:block;margin:1px;content:\\\" \\\";width:calc(100% - 4px);height:calc(100% - 4px);border:1px solid #ff8181}.image-editor-crop div{position:absolute;width:10px;height:10px;border-radius:10px;border:2px solid #f2060d;background-color:#e6b9b9}.editor-crop-left{left:-6px}.editor-crop-right{right:-6px}.editor-crop-top{top:-6px}.editor-crop-bottom{bottom:-6px}.editor-crop-left.editor-crop-top{cursor:nw-resize}.editor-crop-left.editor-crop-bottom{cursor:sw-resize}.editor-crop-right.editor-crop-top{cursor:ne-resize}.editor-crop-right.editor-crop-bottom{cursor:se-resize}.image-editor-addition{position:absolute;min-width:50px;max-width:100%;min-height:20px;line-height:20px;font-size:20px;border:1px dotted #333;text-align:left}.image-editor-addition>*{opacity:0}.image-editor-addition.active>*,.image-editor-addition:hover>*{opacity:1}.editor-add-operate{position:absolute;top:-20px;left:-1px;width:calc(100% + 2px);height:20px;background-color:#333;border-top-left-radius:2px;border-top-right-radius:2px;cursor:move}.editor-add-operate>div{display:inline-block;float:right;width:16px;height:16px;line-height:16px;margin:2px 2px 0 0;color:#fff;font-family:sans-serif;font-size:16px;font-weight:400;border-radius:2px;background-color:red;text-align:center;cursor:pointer}.editor-add-operate>div:hover{opacity:.8}.editor-add-content img{margin:0;max-width:80%;max-height:80%}.image-editor-addition:hover .editor-add-content{background:#fff}.editor-resize-handle{position:absolute;right:0;bottom:0;width:50px;height:50px;cursor:se-resize}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.11@css-loader!./src/picTune/main.css\n// module id = 52\n// module chunks = 0 1","/**\n * High-quality scale function for canvas or image element\n * @param {Number|Object} scale\n * @param {Canvas|Image} input\n * @param {Canvas|String} [output]\n *   if Canvas or undefined, export by canvas\n *   if export == 'png', export by Image png\n *   if export == 'jpeg', export by Image jpeg\n *   if export == 'png-src', export by base64 png string\n *   if export == 'jpeg-src', export by base64 jpeg string\n * @param {Boolean} [inputRemovable]\n *   if not true, original canvas is kept\n *   if true, original canvas is not kept\n * @return {Canvas|String|Image|Boolean}\n *   if error, return false\n */\nexport function scale (scale, input, output, inputRemovable) {\n\tif (!input) {\n\t\tinput = scale.input\n\t\toutput = scale.output\n\t\tinputRemovable = scale.inputRemovable\n\t\tif (scale.scale) scale = scale.scale\n\t}\n\n\tvar HAS_ALPHA = true\n\tvar canvas, ctx\n\tif (input.src) {\n\t\tcanvas = document.createElement('canvas')\n\t\tif (input.naturalWidth != null) {\n\t\t\tcanvas.width = input.naturalWidth\n\t\t\tcanvas.height = input.naturalHeight\n\t\t} else if (input.runtimeStyle != null) {\n\t\t\tvar runtimeStyle = input.runtimeStyle\n\t\t\t  , mw = runtimeStyle.width, mh = runtimeStyle.height\n\t\t\truntimeStyle.width = 'auto'\n\t\t\truntimeStyle.height = 'auto'\n\t\t\tcanvas.width = input.width\n\t\t\tcanvas.height = input.height\n\t\t\truntimeStyle.width = mw\n\t\t\truntimeStyle.height = mh\n\t\t} else {\n\t\t\tvar mw = input.width, mh = input.height\n\t\t\tif (input.removeAttribute) {\n\t\t\t\tinput.removeAttribute('width')\n\t\t\t\tinput.removeAttribute('height')\n\t\t\t}\n\t\t\tcanvas.width = input.width\n\t\t\tcanvas.height = input.height\n\t\t\tinput.width = mw\n\t\t\tinput.height = mh\n\t\t}\n\t} else {\n\t\tcanvas = input\n\t}\n\tctx = canvas.getContext('2d')\n\tif (input.src) ctx.drawImage(input, 0, 0)\n\tvar sw = canvas.width, sh = canvas.height\n\t\t, dw, dh\n\t\t, sourceBuffer = ctx.getImageData(0, 0, sw, sh).data\n\n\tif (!sw || !sh ) return false\n\tif (input.src || inputRemovable) {\n\t\tcanvas.clearRect(0, 0, sw, sh)\n\t}\n\tif (typeof scale === 'object') {\n\t\tif (scale.width) {\n\t\t\tdw = scale.width + 0.5 | 0\n\t\t\tdh = scale.height + 0.5 | 0\n\t\t} else {\n\t\t\tdw = sw * scale.scaleX + 0.5 | 0\n\t\t\tdh = sh * scale.scaleY + 0.5 | 0\n\t\t}\n\t} else {\n\t\tdw = scale * sw + 0.5 | 0\n\t\tdh = scale * sh + 0.5 | 0\n\t}\n\tvar dw4 = dw << 2\n\t\t, sw4 = sw << 2\n\t\t, sx, sy, sindex = 0\n\t\t, dx, dy, dyindex, dindex = 0\n\t\t, idx, idy, isx, isy\n\t\t, w, wx, nwx, wy, nwy\n\t\t, crossX, crossY\n\t\t, dwh4 = dw4 * dh\n\t\t, tmpBuffer\n\t\t, r, g, b, a\n\t\t, dsy, dsx\n\t\t, newCanvas, newCtx, imageData, byteBuffer\n\t\t, TIMES = 255.99 / 255\n\t\t, row0, row1, row2, row3\n\t\t, col0, col1, col2, col3\n\t\t, scaleX = dw / sw\n\t\t, scaleY = dh / sh\n\t\t, scaleXY = scaleX * scaleY\n\n\tfunction setNewCanvas() {\n\t\t// CREATE downscale canvas\n\t\tif (typeof output === 'object') {\n\t\t\tnewCanvas = output\n\t\t} else if (input.src || inputRemovable) {\n\t\t\tnewCanvas = canvas\n\t\t} else {\n\t\t\tnewCanvas = document.createElement('canvas')\n\t\t}\n\t\tnewCanvas.width = dw\n\t\tnewCanvas.height = dh\n\t\tnewCtx = newCanvas.getContext('2d')\n\t}\n\tfunction getImageData(tmpBuffer) {\n\t\tif (!tmpBuffer) {\n\t\t\treturn newCtx.getImageData(0, 0, dw, dh)\n\t\t} else {\n\t\t\tvar imageData = newCtx.getImageData(0, 0, dw, dh)\n\t\t\t\t, byteBuffer = imageData.data\n\t\t\t\t, dindex\n\t\t\tfor (dindex = 0; dindex < dwh4; dindex += 4) {\n\t\t\t\tbyteBuffer[dindex    ] = tmpBuffer[dindex    ] * TIMES | 0\n\t\t\t\tbyteBuffer[dindex + 1] = tmpBuffer[dindex + 1] * TIMES | 0\n\t\t\t\tbyteBuffer[dindex + 2] = tmpBuffer[dindex + 2] * TIMES | 0\n\t\t\t\tbyteBuffer[dindex + 3] = HAS_ALPHA ? tmpBuffer[dindex + 3] * TIMES | 0 : 255\n\t\t\t}\n\t\t\t// delete tmpBuffer\n\t\t\treturn imageData\n\t\t}\n\t}\n\n\tif (scaleX > 1 || scaleY > 1) {\n\t\t// UPSCALE by bicubic\n\t\tfunction bicubic (t, a, b, c, d) {\n\t\t\treturn 0.5 * (c - a + (2 * a - 5 * b + 4 * c - d + (3 * (b - c) + d - a) * t) * t) * t + b\n\t\t}\n\t\tsetNewCanvas()\n\t\timageData = getImageData()\n\t\tbyteBuffer = imageData.data\n\t\tfor (dy = 0; dy < dh; dy++) {\n\t\t\tsy = dy / scaleY\n\t\t\tisy = sy | 0\n\t\t\tdsy = sy - isy\n\t\t\trow1 = isy * sw4\n\t\t\trow0 = isy < 1 ? row1 : row1 - sw4\n\t\t\tif (isy < sh - 2) {\n\t\t\t\trow2 = row1 + sw4\n\t\t\t\trow3 = (isy + 2) * sw4\n\t\t\t} else {\n\t\t\t\trow2 = row3 = isy > sh - 2 ? row1 : row1 + sw4\n\t\t\t}\n\n\t\t\tfor (dx = 0; dx < dw; dx++, dindex += 4) {\n\t\t\t\tsx = dx / scaleX\n\t\t\t\tisx = sx | 0\n\t\t\t\tdsx = sx - isx\n\t\t\t\tcol1 = isx << 2\n\t\t\t\tcol0 = isx < 1 ? col1 : col1 - 4\n\t\t\t\tif (isx < sw - 2) {\n\t\t\t\t\tcol2 = col1 + 4\n\t\t\t\t\tcol3 = col1 + 8\n\t\t\t\t} else {\n\t\t\t\t\tcol2 = col3 = isx > sw - 2 ? col1 : col1 + 4\n\t\t\t\t}\n\n\t\t\t\t// RED\n\t\t\t\tr = bicubic(dsy,\n\t\t\t\t\t\t\tbicubic(dsx\n\t\t\t\t\t\t\t, sourceBuffer[row0 + col0]\n\t\t\t\t\t\t\t, sourceBuffer[row0 + col1]\n\t\t\t\t\t\t\t, sourceBuffer[row0 + col2]\n\t\t\t\t\t\t\t, sourceBuffer[row0 + col3]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t, bicubic(dsx\n\t\t\t\t\t\t\t, sourceBuffer[row1 + col0]\n\t\t\t\t\t\t\t, sourceBuffer[row1 + col1]\n\t\t\t\t\t\t\t, sourceBuffer[row1 + col2]\n\t\t\t\t\t\t\t, sourceBuffer[row1 + col3]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t, bicubic(dsx\n\t\t\t\t\t\t\t, sourceBuffer[row2 + col0]\n\t\t\t\t\t\t\t, sourceBuffer[row2 + col1]\n\t\t\t\t\t\t\t, sourceBuffer[row2 + col2]\n\t\t\t\t\t\t\t, sourceBuffer[row2 + col3]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t, bicubic(dsx\n\t\t\t\t\t\t\t, sourceBuffer[row3 + col0]\n\t\t\t\t\t\t\t, sourceBuffer[row3 + col1]\n\t\t\t\t\t\t\t, sourceBuffer[row3 + col2]\n\t\t\t\t\t\t\t, sourceBuffer[row3 + col3]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) * TIMES | 0\n\n\t\t\t\t// GREEN\n\t\t\t\t++col0, ++col1, ++col2, ++col3\n\t\t\t\tg = bicubic(dsy,\n\t\t\t\t\t\t\tbicubic(dsx\n\t\t\t\t\t\t\t, sourceBuffer[row0 + col0]\n\t\t\t\t\t\t\t, sourceBuffer[row0 + col1]\n\t\t\t\t\t\t\t, sourceBuffer[row0 + col2]\n\t\t\t\t\t\t\t, sourceBuffer[row0 + col3]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t, bicubic(dsx\n\t\t\t\t\t\t\t, sourceBuffer[row1 + col0]\n\t\t\t\t\t\t\t, sourceBuffer[row1 + col1]\n\t\t\t\t\t\t\t, sourceBuffer[row1 + col2]\n\t\t\t\t\t\t\t, sourceBuffer[row1 + col3]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t, bicubic(dsx\n\t\t\t\t\t\t\t, sourceBuffer[row2 + col0]\n\t\t\t\t\t\t\t, sourceBuffer[row2 + col1]\n\t\t\t\t\t\t\t, sourceBuffer[row2 + col2]\n\t\t\t\t\t\t\t, sourceBuffer[row2 + col3]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t, bicubic(dsx\n\t\t\t\t\t\t\t, sourceBuffer[row3 + col0]\n\t\t\t\t\t\t\t, sourceBuffer[row3 + col1]\n\t\t\t\t\t\t\t, sourceBuffer[row3 + col2]\n\t\t\t\t\t\t\t, sourceBuffer[row3 + col3]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) * TIMES | 0\n\n\t\t\t\t// BLUE\n\t\t\t\t++col0, ++col1, ++col2, ++col3\n\t\t\t\tb = bicubic(dsy,\n\t\t\t\t\t\t\tbicubic(dsx\n\t\t\t\t\t\t\t, sourceBuffer[row0 + col0]\n\t\t\t\t\t\t\t, sourceBuffer[row0 + col1]\n\t\t\t\t\t\t\t, sourceBuffer[row0 + col2]\n\t\t\t\t\t\t\t, sourceBuffer[row0 + col3]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t, bicubic(dsx\n\t\t\t\t\t\t\t, sourceBuffer[row1 + col0]\n\t\t\t\t\t\t\t, sourceBuffer[row1 + col1]\n\t\t\t\t\t\t\t, sourceBuffer[row1 + col2]\n\t\t\t\t\t\t\t, sourceBuffer[row1 + col3]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t, bicubic(dsx\n\t\t\t\t\t\t\t, sourceBuffer[row2 + col0]\n\t\t\t\t\t\t\t, sourceBuffer[row2 + col1]\n\t\t\t\t\t\t\t, sourceBuffer[row2 + col2]\n\t\t\t\t\t\t\t, sourceBuffer[row2 + col3]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t, bicubic(dsx\n\t\t\t\t\t\t\t, sourceBuffer[row3 + col0]\n\t\t\t\t\t\t\t, sourceBuffer[row3 + col1]\n\t\t\t\t\t\t\t, sourceBuffer[row3 + col2]\n\t\t\t\t\t\t\t, sourceBuffer[row3 + col3]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) * TIMES | 0\n\n\t\t\t\tbyteBuffer[dindex    ] = r >= 0 ? r < 256 ? r : 255 : 0\n\t\t\t\tbyteBuffer[dindex + 1] = g >= 0 ? g < 256 ? g : 255 : 0\n\t\t\t\tbyteBuffer[dindex + 2] = b >= 0 ? b < 256 ? b : 255 : 0\n\n\t\t\t\tif (HAS_ALPHA) {\n\t\t\t\t\t// ALPHA\n\t\t\t\t\t++col0, ++col1, ++col2, ++col3\n\t\t\t\t\ta = bicubic(dsy,\n\t\t\t\t\t\t\t\tbicubic(dsx\n\t\t\t\t\t\t\t\t, sourceBuffer[row0 + col0]\n\t\t\t\t\t\t\t\t, sourceBuffer[row0 + col1]\n\t\t\t\t\t\t\t\t, sourceBuffer[row0 + col2]\n\t\t\t\t\t\t\t\t, sourceBuffer[row0 + col3]\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t, bicubic(dsx\n\t\t\t\t\t\t\t\t, sourceBuffer[row1 + col0]\n\t\t\t\t\t\t\t\t, sourceBuffer[row1 + col1]\n\t\t\t\t\t\t\t\t, sourceBuffer[row1 + col2]\n\t\t\t\t\t\t\t\t, sourceBuffer[row1 + col3]\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t, bicubic(dsx\n\t\t\t\t\t\t\t\t, sourceBuffer[row2 + col0]\n\t\t\t\t\t\t\t\t, sourceBuffer[row2 + col1]\n\t\t\t\t\t\t\t\t, sourceBuffer[row2 + col2]\n\t\t\t\t\t\t\t\t, sourceBuffer[row2 + col3]\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t, bicubic(dsx\n\t\t\t\t\t\t\t\t, sourceBuffer[row3 + col0]\n\t\t\t\t\t\t\t\t, sourceBuffer[row3 + col1]\n\t\t\t\t\t\t\t\t, sourceBuffer[row3 + col2]\n\t\t\t\t\t\t\t\t, sourceBuffer[row3 + col3]\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t) * TIMES | 0\n\t\t\t\t\tbyteBuffer[dindex + 3] = a >= 0 ? a < 256 ? a : 255 : 0\n\t\t\t\t} else {\n\t\t\t\t\tbyteBuffer[dindex + 3] = 255\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// DOWNSCALE\n\t\tif (Float32Array) {\n\t\t\ttmpBuffer = new Float32Array(dwh4)\n\t\t} else {\n\t\t\ttmpBuffer = []\n\t\t\tfor (dindex = 0; dindex < dwh4; ++dindex) {\n\t\t\t\ttmpBuffer[dindex] = 0\n\t\t\t}\n\t\t}\n\t\t// CREATE float buffer\n\t\tfor (sy = 0; sy < sh; sy++) {\n\t\t\tdy = sy * scaleY\n\t\t\tidy = dy | 0\n\t\t\tdyindex = idy * dw4\n\t\t\tcrossY = (!!((idy - (dy + scaleY | 0)) * (sh - 1 - sy))) << 1\n\t\t\tif (crossY) {\n\t\t\t\twy = idy + 1 - dy\n\t\t\t\tnwy = dy + scaleY - idy - 1\n\t\t\t}\n\t\t\tfor (sx = 0; sx < sw; sx++, sindex += 4) {\n\t\t\t\tdx = sx * scaleX\n\t\t\t\tidx = dx | 0\n\t\t\t\tdindex = dyindex + (idx << 2)\n\t\t\t\tcrossX = !!((idx - (dx + scaleX | 0)) * (sw - 1 - sx))\n\t\t\t\tif (crossX) {\n\t\t\t\t\twx = idx + 1 - dx\n\t\t\t\t\tnwx = dx + scaleX - idx - 1\n\t\t\t\t}\n\t\t\t\tr = sourceBuffer[sindex    ]\n\t\t\t\tg = sourceBuffer[sindex + 1]\n\t\t\t\tb = sourceBuffer[sindex + 2]\n\t\t\t\tif (HAS_ALPHA) a = sourceBuffer[sindex + 3]\n\t\t\t\tswitch (crossX + crossY) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\ttmpBuffer[dindex    ] += r * scaleXY\n\t\t\t\t\t\ttmpBuffer[dindex + 1] += g * scaleXY\n\t\t\t\t\t\ttmpBuffer[dindex + 2] += b * scaleXY\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 3] += a * scaleXY\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tw = wx * scaleY\n\t\t\t\t\t\ttmpBuffer[dindex    ] += r * w\n\t\t\t\t\t\ttmpBuffer[dindex + 1] += g * w\n\t\t\t\t\t\ttmpBuffer[dindex + 2] += b * w\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 3] += a * w\n\t\t\t\t\t\tw = nwx * scaleY\n\t\t\t\t\t\ttmpBuffer[dindex + 4] += r * w\n\t\t\t\t\t\ttmpBuffer[dindex + 5] += g * w\n\t\t\t\t\t\ttmpBuffer[dindex + 6] += b * w\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 7] += a * w\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tw = scaleX * wy\n\t\t\t\t\t\ttmpBuffer[dindex    ] += r * w\n\t\t\t\t\t\ttmpBuffer[dindex + 1] += g * w\n\t\t\t\t\t\ttmpBuffer[dindex + 2] += b * w\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 3] += a * w\n\t\t\t\t\t\tw = scaleX * nwy\n\t\t\t\t\t\tdindex += dw4\n\t\t\t\t\t\ttmpBuffer[dindex    ] += r * w\n\t\t\t\t\t\ttmpBuffer[dindex + 1] += g * w\n\t\t\t\t\t\ttmpBuffer[dindex + 2] += b * w\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 3] += a * w\n\t\t\t\t\t\tbreak\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tw = wx * wy\n\t\t\t\t\t\ttmpBuffer[dindex    ] += r * w\n\t\t\t\t\t\ttmpBuffer[dindex + 1] += g * w\n\t\t\t\t\t\ttmpBuffer[dindex + 2] += b * w\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 3] += a * w\n\t\t\t\t\t\tw = nwx * wy\n\t\t\t\t\t\ttmpBuffer[dindex + 4] += r * w\n\t\t\t\t\t\ttmpBuffer[dindex + 5] += g * w\n\t\t\t\t\t\ttmpBuffer[dindex + 6] += b * w\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 7] += a * w\n\t\t\t\t\t\tw = wx * nwy\n\t\t\t\t\t\tdindex += dw4\n\t\t\t\t\t\ttmpBuffer[dindex    ] += r * w\n\t\t\t\t\t\ttmpBuffer[dindex + 1] += g * w\n\t\t\t\t\t\ttmpBuffer[dindex + 2] += b * w\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 3] += a * w\n\t\t\t\t\t\tw = nwx * nwy\n\t\t\t\t\t\ttmpBuffer[dindex + 4] += r * w\n\t\t\t\t\t\ttmpBuffer[dindex + 5] += g * w\n\t\t\t\t\t\ttmpBuffer[dindex + 6] += b * w\n\t\t\t\t\t\tif (HAS_ALPHA) tmpBuffer[dindex + 7] += a * w\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// delete sourceBuffer\n\t\tsetNewCanvas()\n\t\timageData = getImageData(tmpBuffer)\n\t}\n\n\tnewCtx.putImageData(imageData, 0, 0)\n\tif (typeof output === 'string') {\n\t\tif (output === 'png' || output === 'jpeg') {\n\t\t\tvar img\n\t\t\tif (inputRemovable && input.src) {\n\t\t\t\timg = input\n\t\t\t} else {\n\t\t\t\timg = new Image()\n\t\t\t}\n\t\t\timg.width = dw\n\t\t\timg.height = dh\n\t\t\timg.src = newCanvas.toDataURL('image/' + output, 1)\n\t\t\treturn img\n\t\t} else if (output === 'png-src' || output === 'jpeg-src') {\n\t\t\treturn newCanvas.toDataURL('image/' + output.split('-')[0], 1)\n\t\t}\n\t}\n\treturn newCanvas\n}// scale function end\n\n\n\n// WEBPACK FOOTER //\n// ./src/picTune/scale.js","/*\n * glfx.js\n * http://evanw.github.com/glfx.js/\n *\n * Copyright 2011 Evan Wallace\n * Released under the MIT license\n */\n\nexport const fx = function() {\n    var exports = {};\n    var gl;\n\n    function clamp(lo, value, hi) {\n        return Math.max(lo, Math.min(value, hi));\n    }\n\n    function wrapTexture(texture) {\n        return {\n            _: texture,\n            loadContentsOf: function(element) {\n                // WebGL\n                gl = this._.gl;\n                this._.loadContentsOf(element);\n            },\n            destroy: function() {\n                // WebGL\n                gl = this._.gl;\n                this._.destroy();\n            }\n        };\n    }\n\n    function texture(element) {\n        return wrapTexture(Texture.fromElement(element));\n    }\n\n    function initialize(width, height) {\n        var type = gl.UNSIGNED_BYTE;\n\n        // textures WindowsANGLEtextures\n        // Go for floating point buffer textures if we can, it'll make the bokeh\n        // filter look a lot better. Note that on Windows, ANGLE does not let you\n        // render to a floating-point texture when linear filtering is enabled.\n        // See http://crbug.com/172278 for more information.\n        if (gl.getExtension('OES_texture_float') && gl.getExtension('OES_texture_float_linear')) {\n            var testTexture = new Texture(100, 100, gl.RGBA, gl.FLOAT);\n            try {\n                // gl.FLOAT\n                testTexture.drawTo(function() { type = gl.FLOAT; });\n            } catch (e) {}\n            testTexture.destroy();\n        }\n\n        if (this._.texture) this._.texture.destroy();\n        if (this._.spareTexture) this._.spareTexture.destroy();\n        this.width = width;\n        this.height = height;\n        this._.texture = new Texture(width, height, gl.RGBA, type);\n        this._.spareTexture = new Texture(width, height, gl.RGBA, type);\n        this._.extraTexture = this._.extraTexture || new Texture(0, 0, gl.RGBA, type);\n        this._.flippedShader = this._.flippedShader || new Shader(null, '\\\n\t        uniform sampler2D texture;\\\n\t        varying vec2 texCoord;\\\n\t        void main() {\\\n\t            gl_FragColor = texture2D(texture, vec2(texCoord.x, 1.0 - texCoord.y));\\\n\t        }\\\n\t    ');\n        this._.isInitialized = true;\n    }\n\n    /*\n      texturetexture\n    */\n    function draw(texture, width, height) {\n        if (!this._.isInitialized || texture._.width != this.width || texture._.height != this.height) {\n            initialize.call(this, width ? width : texture._.width, height ? height : texture._.height);\n        }\n\n        texture._.use();\n        this._.texture.drawTo(function() {\n            Shader.getDefaultShader().drawRect();\n        });\n\n        return this;\n    }\n\n    function update() {\n        this._.texture.use();\n        this._.flippedShader.drawRect();\n        return this;\n    }\n\n    function simpleShader(shader, uniforms, textureIn, textureOut) {\n        (textureIn || this._.texture).use();\n        this._.spareTexture.drawTo(function() {\n            shader.uniforms(uniforms).drawRect();\n        });\n        this._.spareTexture.swapWith(textureOut || this._.texture);\n    }\n\n    function replace(node) {\n        node.parentNode.insertBefore(this, node);\n        node.parentNode.removeChild(node);\n        return this;\n    }\n\n    function contents() {\n        var texture = new Texture(this._.texture.width, this._.texture.height, gl.RGBA, gl.UNSIGNED_BYTE);\n        this._.texture.use();\n        texture.drawTo(function() {\n            Shader.getDefaultShader().drawRect();\n        });\n        return wrapTexture(texture);\n    }\n\n    /*\n       Uint8: [r, g, b, a, r, g, b, a, ...]\n        width * height * 4.\n    */\n    function getPixelArray() {\n        var w = this._.texture.width;\n        var h = this._.texture.height;\n        var array = new Uint8Array(w * h * 4);\n        this._.texture.drawTo(function() {\n            gl.readPixels(0, 0, w, h, gl.RGBA, gl.UNSIGNED_BYTE, array);\n        });\n        return array;\n    }\n\n    function wrap(func) {\n        return function() {\n            // WebGL\n            gl = this._.gl;\n\n            // \n            return func.apply(this, arguments);\n        };\n    }\n\n\n    // from javax.media.jai.PerspectiveTransform\n\n    function getSquareToQuad(x0, y0, x1, y1, x2, y2, x3, y3) {\n        var dx1 = x1 - x2;\n        var dy1 = y1 - y2;\n        var dx2 = x3 - x2;\n        var dy2 = y3 - y2;\n        var dx3 = x0 - x1 + x2 - x3;\n        var dy3 = y0 - y1 + y2 - y3;\n        var det = dx1 * dy2 - dx2 * dy1;\n        var a = (dx3 * dy2 - dx2 * dy3) / det;\n        var b = (dx1 * dy3 - dx3 * dy1) / det;\n        return [\n            x1 - x0 + a * x1, y1 - y0 + a * y1, a,\n            x3 - x0 + b * x3, y3 - y0 + b * y3, b,\n            x0, y0, 1\n        ];\n    }\n\n    function getInverse(m) {\n        var a = m[0],\n            b = m[1],\n            c = m[2];\n        var d = m[3],\n            e = m[4],\n            f = m[5];\n        var g = m[6],\n            h = m[7],\n            i = m[8];\n        var det = a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n        return [\n            (e * i - f * h) / det, (c * h - b * i) / det, (b * f - c * e) / det,\n            (f * g - d * i) / det, (a * i - c * g) / det, (c * d - a * f) / det,\n            (d * h - e * g) / det, (b * g - a * h) / det, (a * e - b * d) / det\n        ];\n    }\n\n    function multiply(a, b) {\n        return [\n            a[0] * b[0] + a[1] * b[3] + a[2] * b[6],\n            a[0] * b[1] + a[1] * b[4] + a[2] * b[7],\n            a[0] * b[2] + a[1] * b[5] + a[2] * b[8],\n            a[3] * b[0] + a[4] * b[3] + a[5] * b[6],\n            a[3] * b[1] + a[4] * b[4] + a[5] * b[7],\n            a[3] * b[2] + a[4] * b[5] + a[5] * b[8],\n            a[6] * b[0] + a[7] * b[3] + a[8] * b[6],\n            a[6] * b[1] + a[7] * b[4] + a[8] * b[7],\n            a[6] * b[2] + a[7] * b[5] + a[8] * b[8]\n        ];\n    }\n\n    function warpShader(uniforms, warp) {\n        return new Shader(null, uniforms + '\\\n\t    uniform sampler2D texture;\\\n\t    uniform vec2 texSize;\\\n\t    varying vec2 texCoord;\\\n\t    void main() {\\\n\t        vec2 coord = texCoord * texSize;\\\n\t        ' + warp + '\\\n\t        gl_FragColor = texture2D(texture, coord / texSize);\\\n\t        vec2 clampedCoord = clamp(coord, vec2(0.0), texSize);\\\n\t        if (coord != clampedCoord) {\\\n\t            /* fade to transparent if we are outside the image */\\\n\t            gl_FragColor.a *= max(0.0, 1.0 - length(coord - clampedCoord));\\\n\t        }\\\n\t    }');\n    }\n    /**\n     * @filter           Hue / Saturation\n     * @description      Provides rotational hue and multiplicative saturation control. RGB color space\n     *                   can be imagined as a cube where the axes are the red, green, and blue color\n     *                   values. Hue changing works by rotating the color vector around the grayscale\n     *                   line, which is the straight line from black (0, 0, 0) to white (1, 1, 1).\n     *                   Saturation is implemented by scaling all color channel values either toward\n     *                   or away from the average color channel value.\n     * @param hue        -1 to 1 (-1 is 180 degree rotation in the negative direction, 0 is no change,\n     *                   and 1 is 180 degree rotation in the positive direction)\n     * @param saturation -1 to 1 (-1 is solid gray, 0 is no change, and 1 is maximum contrast)\n     */\n    function hueColor(args) {\n        var hue = args[0],\n        greenRed = args[1],\n        purpleGreen = args[2],\n        yellowBlue = args[3];\n        gl.hueColor = gl.hueColor || new Shader(null, '\\\n\t        uniform sampler2D texture;\\\n\t        uniform float hue;\\\n\t        uniform float greenRed;\\\n\t        uniform float purpleGreen;\\\n\t        uniform float yellowBlue;\\\n\t        varying vec2 texCoord;\\\n\t        void main() {\\\n\t            vec4 color = texture2D(texture, texCoord);\\\n\t            \\\n\t            /* hue adjustment, wolfram alpha: RotationTransform[angle, {1, 1, 1}][{x, y, z}] */\\\n\t            float angle = hue * 3.14159265;\\\n\t            float s = sin(angle), c = cos(angle);\\\n\t            vec3 weights = (vec3(2.0 * c, -sqrt(3.0) * s - c, sqrt(3.0) * s - c) + 1.0) / 3.0;\\\n\t            float len = length(color.rgb);\\\n\t            color.rgb = vec3(\\\n\t                dot(color.rgb, weights.xyz),\\\n\t                dot(color.rgb, weights.zxy),\\\n\t                dot(color.rgb, weights.yzx)\\\n\t            );\\\n\t            color.r += greenRed; \\\n\t            color.g -= greenRed; \\\n\t            color.b -= greenRed; \\\n\t            color.r -= purpleGreen; \\\n\t            color.g += purpleGreen; \\\n\t            color.b -= purpleGreen; \\\n\t            color.r -= yellowBlue; \\\n\t            color.g -= yellowBlue; \\\n\t            color.b += yellowBlue; \\\n\t            gl_FragColor = color;\\\n\t        }\\\n\t    ');\n\n        simpleShader.call(this, gl.hueColor, {\n            hue: clamp(-1, hue, 1),\n            greenRed: clamp(-1, greenRed/5, 1),\n            purpleGreen: clamp(-1, purpleGreen/5, 1),\n            yellowBlue: clamp(-1, yellowBlue/5, 1)               \n        });\n\n        return this;\n    }\n\n    /**\n     * @filter           Brightness / Contrast/ Saturation / Blur\n     * @description      Provides additive brightness and multiplicative contrast control.\n     * @param brightness -1 to 1 (-1 is solid black, 0 is no change, and 1 is solid white)\n     * @param saturation -1 to 1 (-1 is solid gray, 0 is no change, and 1 is maximum contrast)\n     * @param contrast   -1 to 1 (-1 is solid gray, 0 is no change, and 1 is maximum contrast)\n     * @param radius The radius of the pyramid convolved with the image.\n     */\n    function brightnesscontrastSaturationBur(args) {\n        var brightness = args[0],\n        contrast = args[1],\n        saturation = args[2],\n        radius = args[3];\n        gl.brightnesscontrastSaturationBur = gl.brightnesscontrastSaturationBur || new Shader(null, '\\\n            uniform sampler2D texture;\\\n            uniform float brightness;\\\n            uniform float contrast;\\\n            uniform float saturation;\\\n            uniform vec2 delta;\\\n            varying vec2 texCoord;\\\n            ' + randomShaderFunc + '\\\n            void main() {\\\n                vec4 color = vec4(0.0);\\\n                float total = 0.0;\\\n                \\\n                /* randomize the lookup values to hide the fixed number of samples */\\\n                float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\\\n                \\\n                for (float t = -30.0; t <= 30.0; t++) {\\\n                    float percent = (t + offset - 0.5) / 30.0;\\\n                    float weight = 1.0 - abs(percent);\\\n                    vec4 sample = texture2D(texture, texCoord + delta * percent);\\\n                    \\\n                    /* switch to pre-multiplied alpha to correctly blur transparent images */\\\n                    sample.rgb *= sample.a;\\\n                    \\\n                    color += sample * weight;\\\n                    total += weight;\\\n                    color.rgb += brightness;\\\n                    if (contrast > 0.0) {\\\n                        color.rgb = (color.rgb - 0.5) / (1.0 - contrast) + 0.5;\\\n                    } else {\\\n                        color.rgb = (color.rgb - 0.5) * (1.0 + contrast) + 0.5;\\\n                    }\\\n                    /* saturation adjustment */\\\n                    float average = (color.r + color.g + color.b) / 3.0;\\\n                    if (saturation > 0.0) {\\\n                        color.rgb += (average - color.rgb) * (1.0 - 1.0 / (1.001 - saturation));\\\n                    } else {\\\n                        color.rgb += (average - color.rgb) * (-saturation);\\\n                    }\\\n                }\\\n                \\\n                gl_FragColor = color / total;\\\n                \\\n                /* switch back from pre-multiplied alpha */\\\n                gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\\\n            }\\\n        ');\n\n        simpleShader.call(this, gl.brightnesscontrastSaturationBur, {\n            brightness: clamp(-1, brightness / 10, 1),\n            contrast: clamp(-1, contrast / 100, 1),\n            saturation: clamp(-1, saturation / 50, 1),\n        });\n        simpleShader.call(this, gl.brightnesscontrastSaturationBur, {\n            delta: [radius / this.width, 0]\n        });\n        simpleShader.call(this, gl.brightnesscontrastSaturationBur, {\n            delta: [0, radius / this.height]\n        });\n\n        return this;\n    }\n\n\n    // From: https://github.com/evanw/OES_texture_float_linear-polyfill\n    (function() {\n        // 2x2texture20\n        //texture,2 + 0 + 0 + 0/ 4 = 0.5\n        // Linear filtering is only supported if a sample taken\n        // from the center of that texture is (2 + 0 + 0 + 0) / 4 = 0.5.\n        function supportsOESTextureFloatLinear(gl) {\n            //  textures\n            if (!gl.getExtension('OES_texture_float')) {\n                return false;\n            }\n\n            // \n            var framebuffer = gl.createFramebuffer();\n            var byteTexture = gl.createTexture();\n            gl.bindTexture(gl.TEXTURE_2D, byteTexture);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n            gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, byteTexture, 0);\n\n            // 0.5Texture\n            var rgba = [\n                2, 0, 0, 0,\n                0, 0, 0, 0,\n                0, 0, 0, 0,\n                0, 0, 0, 0\n            ];\n            var floatTexture = gl.createTexture();\n            gl.bindTexture(gl.TEXTURE_2D, floatTexture);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, gl.FLOAT, new Float32Array(rgba));\n\n            // \n            var program = gl.createProgram();\n            var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n            var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n            gl.shaderSource(vertexShader, '\\\n\t\t      attribute vec2 vertex;\\\n\t\t      void main() {\\\n\t\t        gl_Position = vec4(vertex, 0.0, 1.0);\\\n\t\t      }\\\n\t\t    ');\n            gl.shaderSource(fragmentShader, '\\\n\t\t      uniform sampler2D texture;\\\n\t\t      void main() {\\\n\t\t        gl_FragColor = texture2D(texture, vec2(0.5));\\\n\t\t      }\\\n\t\t    ');\n            gl.compileShader(vertexShader);\n            gl.compileShader(fragmentShader);\n            gl.attachShader(program, vertexShader);\n            gl.attachShader(program, fragmentShader);\n            gl.linkProgram(program);\n\n            // \n            var buffer = gl.createBuffer();\n            gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0]), gl.STREAM_DRAW);\n            gl.enableVertexAttribArray(0);\n            gl.vertexAttribPointer(0, 2, gl.FLOAT, false, 0, 0);\n\n            // \n            var pixel = new Uint8Array(4);\n            gl.useProgram(program);\n            gl.viewport(0, 0, 1, 1);\n            gl.bindTexture(gl.TEXTURE_2D, floatTexture);\n            gl.drawArrays(gl.POINTS, 0, 1);\n            gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel);\n\n            // 0.5\n            // The center sample will only have a value of 0.5 if linear filtering works\n            return pixel[0] === 127 || pixel[0] === 128;\n        }\n\n        // \n        function OESTextureFloatLinear() {}\n\n        // Cache the extension so it's specific to each context like extensions should be\n        // extension\n        function getOESTextureFloatLinear(gl) {\n            if (gl.$OES_texture_float_linear$ === void 0) {\n                Object.defineProperty(gl, '$OES_texture_float_linear$', {\n                    enumerable: false,\n                    configurable: false,\n                    writable: false,\n                    value: new OESTextureFloatLinear()\n                });\n            }\n            return gl.$OES_texture_float_linear$;\n        }\n\n        // getExtension()\n        function getExtension(name) {\n            return name === 'OES_texture_float_linear' ? getOESTextureFloatLinear(this) : oldGetExtension.call(this, name);\n        }\n\n        //  getSupportedExtensions()\n        function getSupportedExtensions() {\n            var extensions = oldGetSupportedExtensions.call(this);\n            if (extensions.indexOf('OES_texture_float_linear') === -1) {\n                extensions.push('OES_texture_float_linear');\n            }\n            return extensions;\n        }\n\n        // WebGL\n        try {\n            var gl = document.createElement('canvas').getContext('experimental-webgl');\n        } catch (e) {}\n\n        // WebGLpolyfill\n        if (!gl || gl.getSupportedExtensions().indexOf('OES_texture_float_linear') !== -1) {\n            return;\n        }\n\n        // texturespolyfill \n        if (supportsOESTextureFloatLinear(gl)) {\n            var oldGetExtension = WebGLRenderingContext.prototype.getExtension;\n            var oldGetSupportedExtensions = WebGLRenderingContext.prototype.getSupportedExtensions;\n            WebGLRenderingContext.prototype.getExtension = getExtension;\n            WebGLRenderingContext.prototype.getSupportedExtensions = getSupportedExtensions;\n        }\n    }());\n\n    exports.canvas = function() {\n        var canvas = document.createElement('canvas');\n        try {\n            gl = canvas.getContext('experimental-webgl', { premultipliedAlpha: false,preserveDrawingBuffer:true});\n        } catch (e) {\n            gl = null;\n        }\n        if (!gl) {\n            throw 'This browser does not support WebGL';\n        }\n        canvas._ = {\n            gl: gl,\n            isInitialized: false,\n            texture: null,\n            spareTexture: null,\n            flippedShader: null\n        };\n\n        // \n        canvas.texture = wrap(texture);\n        canvas.draw = wrap(draw);\n        canvas.update = wrap(update);\n        canvas.replace = wrap(replace);\n        canvas.contents = wrap(contents);\n        canvas.getPixelArray = wrap(getPixelArray);\n\n        // \n        canvas.brightnesscontrastSaturationBur = wrap(brightnesscontrastSaturationBur);\n        canvas.hueColor = wrap(hueColor);\n\n        return canvas;\n    };\n    // exports.splineInterpolate = splineInterpolate;\n\n    var Shader = (function() {\n        function isArray(obj) {\n            return Object.prototype.toString.call(obj) == '[object Array]';\n        }\n\n        function isNumber(obj) {\n            return Object.prototype.toString.call(obj) == '[object Number]';\n        }\n\n        function compileSource(type, source) {\n            var shader = gl.createShader(type);\n            gl.shaderSource(shader, source);\n            gl.compileShader(shader);\n            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n                throw 'compile error: ' + gl.getShaderInfoLog(shader);\n            }\n            return shader;\n        }\n\n        var defaultVertexSource = '\\\n\t    attribute vec2 vertex;\\\n\t    attribute vec2 _texCoord;\\\n\t    varying vec2 texCoord;\\\n\t    void main() {\\\n\t        texCoord = _texCoord;\\\n\t        gl_Position = vec4(vertex * 2.0 - 1.0, 0.0, 1.0);\\\n\t    }';\n\n        var defaultFragmentSource = '\\\n\t    uniform sampler2D texture;\\\n\t    varying vec2 texCoord;\\\n\t    void main() {\\\n\t        gl_FragColor = texture2D(texture, texCoord);\\\n\t    }';\n\n        function Shader(vertexSource, fragmentSource) {\n            this.vertexAttribute = null;\n            this.texCoordAttribute = null;\n            this.program = gl.createProgram();\n            vertexSource = vertexSource || defaultVertexSource;\n            fragmentSource = fragmentSource || defaultFragmentSource;\n            fragmentSource = 'precision highp float;' + fragmentSource; // annoying requirement is annoying\n            gl.attachShader(this.program, compileSource(gl.VERTEX_SHADER, vertexSource));\n            gl.attachShader(this.program, compileSource(gl.FRAGMENT_SHADER, fragmentSource));\n            gl.linkProgram(this.program);\n            if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n                throw 'link error: ' + gl.getProgramInfoLog(this.program);\n            }\n        }\n\n        Shader.prototype.destroy = function() {\n            gl.deleteProgram(this.program);\n            this.program = null;\n        };\n\n        Shader.prototype.uniforms = function(uniforms) {\n            gl.useProgram(this.program);\n            for (var name in uniforms) {\n                if (!uniforms.hasOwnProperty(name)) continue;\n                var location = gl.getUniformLocation(this.program, name);\n                if (location === null) continue; // will be null if the uniform isn't used in the shader\n                var value = uniforms[name];\n                if (isArray(value)) {\n                    switch (value.length) {\n                        case 1:\n                            gl.uniform1fv(location, new Float32Array(value));\n                            break;\n                        case 2:\n                            gl.uniform2fv(location, new Float32Array(value));\n                            break;\n                        case 3:\n                            gl.uniform3fv(location, new Float32Array(value));\n                            break;\n                        case 4:\n                            gl.uniform4fv(location, new Float32Array(value));\n                            break;\n                        case 9:\n                            gl.uniformMatrix3fv(location, false, new Float32Array(value));\n                            break;\n                        case 16:\n                            gl.uniformMatrix4fv(location, false, new Float32Array(value));\n                            break;\n                        default:\n                            throw 'dont\\'t know how to load uniform \"' + name + '\" of length ' + value.length;\n                    }\n                } else if (isNumber(value)) {\n                    gl.uniform1f(location, value);\n                } else {\n                    throw 'attempted to set uniform \"' + name + '\" to invalid value ' + (value || 'undefined').toString();\n                }\n            }\n            // \n            return this;\n        };\n\n        // textures gl.uniform1f07\n        Shader.prototype.textures = function(textures) {\n            gl.useProgram(this.program);\n            for (var name in textures) {\n                if (!textures.hasOwnProperty(name)) continue;\n                gl.uniform1i(gl.getUniformLocation(this.program, name), textures[name]);\n            }\n            // \n            return this;\n        };\n\n        Shader.prototype.drawRect = function(left, top, right, bottom) {\n            var undefined;\n            var viewport = gl.getParameter(gl.VIEWPORT);\n            top = top !== undefined ? (top - viewport[1]) / viewport[3] : 0;\n            left = left !== undefined ? (left - viewport[0]) / viewport[2] : 0;\n            right = right !== undefined ? (right - viewport[0]) / viewport[2] : 1;\n            bottom = bottom !== undefined ? (bottom - viewport[1]) / viewport[3] : 1;\n            if (gl.vertexBuffer == null) {\n                gl.vertexBuffer = gl.createBuffer();\n            }\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.vertexBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([left, top, left, bottom, right, top, right, bottom]), gl.STATIC_DRAW);\n            if (gl.texCoordBuffer == null) {\n                gl.texCoordBuffer = gl.createBuffer();\n                gl.bindBuffer(gl.ARRAY_BUFFER, gl.texCoordBuffer);\n                gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]), gl.STATIC_DRAW);\n            }\n            if (this.vertexAttribute == null) {\n                this.vertexAttribute = gl.getAttribLocation(this.program, 'vertex');\n                gl.enableVertexAttribArray(this.vertexAttribute);\n            }\n            if (this.texCoordAttribute == null) {\n                this.texCoordAttribute = gl.getAttribLocation(this.program, '_texCoord');\n                gl.enableVertexAttribArray(this.texCoordAttribute);\n            }\n            gl.useProgram(this.program);\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.vertexBuffer);\n            gl.vertexAttribPointer(this.vertexAttribute, 2, gl.FLOAT, false, 0, 0);\n            gl.bindBuffer(gl.ARRAY_BUFFER, gl.texCoordBuffer);\n            gl.vertexAttribPointer(this.texCoordAttribute, 2, gl.FLOAT, false, 0, 0);\n            gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n        };\n\n        Shader.getDefaultShader = function() {\n            gl.defaultShader = gl.defaultShader || new Shader();\n            return gl.defaultShader;\n        };\n\n        return Shader;\n    })();\n\n    function SplineInterpolator(points) {\n        var n = points.length;\n        this.xa = [];\n        this.ya = [];\n        this.u = [];\n        this.y2 = [];\n\n        points.sort(function(a, b) {\n            return a[0] - b[0];\n        });\n        for (var i = 0; i < n; i++) {\n            this.xa.push(points[i][0]);\n            this.ya.push(points[i][1]);\n        }\n\n        this.u[0] = 0;\n        this.y2[0] = 0;\n\n        for (var i = 1; i < n - 1; ++i) {\n            //\n            // y2u\n            var wx = this.xa[i + 1] - this.xa[i - 1];\n            var sig = (this.xa[i] - this.xa[i - 1]) / wx;\n            var p = sig * this.y2[i - 1] + 2.0;\n\n            this.y2[i] = (sig - 1.0) / p;\n\n            var ddydx =\n                (this.ya[i + 1] - this.ya[i]) / (this.xa[i + 1] - this.xa[i]) -\n                (this.ya[i] - this.ya[i - 1]) / (this.xa[i] - this.xa[i - 1]);\n\n            this.u[i] = (6.0 * ddydx / wx - sig * this.u[i - 1]) / p;\n        }\n\n        this.y2[n - 1] = 0;\n\n        // \n        for (var i = n - 2; i >= 0; --i) {\n            this.y2[i] = this.y2[i] * this.y2[i + 1] + this.u[i];\n        }\n    }\n    SplineInterpolator.prototype.interpolate = function(x) {\n        var n = this.ya.length;\n        var klo = 0;\n        var khi = n - 1;\n\n        // We will find the right place in the table by means of\n        // bisection. This is optimal if sequential calls to this\n        // routine are at random values of x. If sequential calls\n        // are in order, and closely spaced, one would do better\n        // to store previous values of klo and khi.\n        //  x klokhi\n        while (khi - klo > 1) {\n            var k = (khi + klo) >> 1;\n\n            if (this.xa[k] > x) {\n                khi = k;\n            } else {\n                klo = k;\n            }\n        }\n\n        var h = this.xa[khi] - this.xa[klo];\n        var a = (this.xa[khi] - x) / h;\n        var b = (x - this.xa[klo]) / h;\n\n        // Cubic spline polynomial is now evaluated.\n        return a * this.ya[klo] + b * this.ya[khi] +\n            ((a * a * a - a) * this.y2[klo] + (b * b * b - b) * this.y2[khi]) * (h * h) / 6.0;\n    };\n\n    var Texture = (function() {\n        Texture.fromElement = function(element) {\n            var texture = new Texture(0, 0, gl.RGBA, gl.UNSIGNED_BYTE);\n            texture.loadContentsOf(element);\n            return texture;\n        };\n\n        function Texture(width, height, format, type) {\n            this.gl = gl;\n            this.id = gl.createTexture();\n            this.width = width;\n            this.height = height;\n            this.format = format;\n            this.type = type;\n\n            gl.bindTexture(gl.TEXTURE_2D, this.id);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            if (width && height) gl.texImage2D(gl.TEXTURE_2D, 0, this.format, width, height, 0, this.format, this.type, null);\n        }\n\n        Texture.prototype.loadContentsOf = function(element) {\n            this.width = element.width || element.videoWidth;\n            this.height = element.height || element.videoHeight;\n            gl.bindTexture(gl.TEXTURE_2D, this.id);\n            gl.texImage2D(gl.TEXTURE_2D, 0, this.format, this.format, this.type, element);\n        };\n\n        Texture.prototype.initFromBytes = function(width, height, data) {\n            this.width = width;\n            this.height = height;\n            this.format = gl.RGBA;\n            this.type = gl.UNSIGNED_BYTE;\n            gl.bindTexture(gl.TEXTURE_2D, this.id);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, this.type, new Uint8Array(data));\n        };\n\n        Texture.prototype.destroy = function() {\n            gl.deleteTexture(this.id);\n            this.id = null;\n        };\n\n        Texture.prototype.use = function(unit) {\n            gl.activeTexture(gl.TEXTURE0 + (unit || 0));\n            gl.bindTexture(gl.TEXTURE_2D, this.id);\n        };\n\n        Texture.prototype.unuse = function(unit) {\n            gl.activeTexture(gl.TEXTURE0 + (unit || 0));\n            gl.bindTexture(gl.TEXTURE_2D, null);\n        };\n\n        Texture.prototype.ensureFormat = function(width, height, format, type) {\n            // texture\n            if (arguments.length == 1) {\n                var texture = arguments[0];\n                width = texture.width;\n                height = texture.height;\n                format = texture.format;\n                type = texture.type;\n            }\n\n            // \n            if (width != this.width || height != this.height || format != this.format || type != this.type) {\n                this.width = width;\n                this.height = height;\n                this.format = format;\n                this.type = type;\n                gl.bindTexture(gl.TEXTURE_2D, this.id);\n                gl.texImage2D(gl.TEXTURE_2D, 0, this.format, width, height, 0, this.format, this.type, null);\n            }\n        };\n\n        Texture.prototype.drawTo = function(callback) {\n            //  texture\n            gl.framebuffer = gl.framebuffer || gl.createFramebuffer();\n            gl.bindFramebuffer(gl.FRAMEBUFFER, gl.framebuffer);\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this.id, 0);\n            if (gl.checkFramebufferStatus(gl.FRAMEBUFFER) !== gl.FRAMEBUFFER_COMPLETE) {\n                throw new Error('incomplete framebuffer');\n            }\n            gl.viewport(0, 0, this.width, this.height);\n\n            // do the drawing\n            callback();\n\n            //  texture\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        };\n\n        var canvas = null;\n\n        function getCanvas(texture) {\n            if (canvas == null) {\n                canvas = document.createElement('canvas');\n            }\n            canvas.width = texture.width;\n            canvas.height = texture.height;\n            var c = canvas.getContext('2d');\n            c.clearRect(0, 0, canvas.width, canvas.height);\n            return c;\n        }\n\n        Texture.prototype.fillUsingCanvas = function(callback) {\n            callback(getCanvas(this));\n            this.format = gl.RGBA;\n            this.type = gl.UNSIGNED_BYTE;\n            gl.bindTexture(gl.TEXTURE_2D, this.id);\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, canvas);\n            return this;\n        };\n\n        Texture.prototype.toImage = function(image) {\n            this.use();\n            Shader.getDefaultShader().drawRect();\n            var size = this.width * this.height * 4;\n            var pixels = new Uint8Array(size);\n            var c = getCanvas(this);\n            var data = c.createImageData(this.width, this.height);\n            gl.readPixels(0, 0, this.width, this.height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n            for (var i = 0; i < size; i++) {\n                data.data[i] = pixels[i];\n            }\n            c.putImageData(data, 0, 0);\n            image.src = canvas.toDataURL();\n        };\n\n        Texture.prototype.swapWith = function(other) {\n            var temp;\n            temp = other.id;\n            other.id = this.id;\n            this.id = temp;\n            temp = other.width;\n            other.width = this.width;\n            this.width = temp;\n            temp = other.height;\n            other.height = this.height;\n            this.height = temp;\n            temp = other.format;\n            other.format = this.format;\n            this.format = temp;\n        };\n\n        return Texture;\n    })();\n\n    //  0  1\n    var randomShaderFunc = '\\\n\t    float random(vec3 scale, float seed) {\\\n\t        /* use the fragment position for a different seed per-pixel */\\\n\t        return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\\\n\t    }\\\n\t';\n\n    return exports;\n\n}();\n\n\n\n// WEBPACK FOOTER //\n// ./src/picTune/glfx.js","export const Query = {\n    parse ( search = window.location.search ) {\n        if (!search) return {};\n\n        const queryString = search[0] === '?' ? search.substring(1) : search;\n        const query = {};\n\n        queryString.split('&')\n            .forEach(queryStr => {\n                const [key, value] = queryStr.split('=');\n                if (key) query[key] = value;\n            });\n\n        return query;\n    },\n    stringify ( query, prefix = '?' ) {\n        const queryString = Object.keys(query)\n            .map(key => `${key}=${encodeURIComponent(query[key] || '')}`)\n            .join('&');\n\n        return queryString ? prefix + queryString : ''\n    }\n}\n\nexport const http = {\n    get: ajaxFactory('GET'),\n    post: ajaxFactory('POST')\n}\n\n/**\n * [turnOver   ]\n * @param  {[type]} oGC  [2d context]\n * @param  {[type]} obj [img]\n * @param  {[type]} iNow [45]\n * @return {[type]} [description]\n */\nexport function turnOver ( oC ) {\n    let oGC = oC.getContext('2d'),\n        oImg = oGC.getImageData(0, 0, oC.width, oC.height),\n        newImg = oGC.createImageData(oC.width, oC.height);\n\n    let w = oImg.width,\n        h = oImg.height;\n\n    for (let i = 0; i < w; i++) {\n\n        for (let j = 0; j < h; j++) {\n            let color = getXY(oImg, i, j);\n\n            setXY(newImg, w - 1 - i, j, color);\n        }\n    }\n\n    oGC.putImageData(newImg, 0, 0);\n}\n\nexport function runFunction (fn, thisObj, args) {\n    if (fn && typeof fn === \"function\") {\n        var argus = arguments,\n            argsl = argus.length;\n\n        //1\n        if (argsl == 1) {\n            return fn.apply(window);\n        }\n\n        //2\n        if (argsl == 2) {\n            if (Array.isArray(thisObj)) {\n                return fn.apply(window, thisObj);\n            } else {\n                return fn.apply(thisObj);\n            }\n        }\n\n        //3\n        if (argsl == 3) {\n            return fn.apply(thisObj || window, args);\n        }\n    }\n}\n\n/**\n * base64urlBlob\n * @param  {String} urlData  urlbase64\n * @return {Object} Blob\n */\nexport function convertDataurlToBlob ( urlData, type ) {\n\n    //urlbyte\n    var bytes = window.atob(urlData.split(',')[1]);\n\n    //,ascii00\n    var ab = new ArrayBuffer(bytes.length);\n    var ia = new Uint8Array(ab);\n    for (var i = 0; i < bytes.length; i++) {\n        ia[i] = bytes.charCodeAt(i);\n    }\n\n    return new Blob([ab], {\n        type: type\n    });\n}\n\n/**\n * \n */\nexport function toggleClass ( el, cls, toggle ) {\n    let className = el.className,\n        reg = new RegExp(`(^|\\\\s+)${cls}(?=\\\\s+|$)`, 'g'),\n        isHas = !!className.match(reg),\n        isChange = false;\n\n    toggle = typeof toggle !== 'undefined' ? toggle : !isHas;\n\n    if ( !toggle && isHas ) {\n        el.className = className.replace(reg, '');\n        isChange = true;\n    } else if ( toggle && !isHas ) {\n        className = className.split(/\\s+/);\n        className.push(cls);\n        el.className = className.join(' ');\n        isChange = true;\n    }\n\n    return isChange;\n}\n\nfunction ajaxFactory ( method ) {\n    return function ( options ) {\n        const req = new XMLHttpRequest();\n\n        let url = options.url,\n            data = options.data,\n            body = null;\n\n        if (method === 'GET' && data) {\n            url += Query.stringify(data, url.indexOf('?') == -1 ? '?' : '&');\n        }\n\n        const p = new Promise((resolve, reject) => {\n            req.addEventListener('load', () => {\n                const contentType = req.getResponseHeader('content-type');\n                const res = req.responseType != 'text' && req.responseType != '' ? req.response : req.responseText;\n\n                resolve(res);\n            });\n\n            req.addEventListener('error', error => reject(error));\n        });\n\n        req.open(method, url, true);\n\n        if (method !== 'GET') {\n            if ( data && data.append ) {\n                body = data;\n            } else {\n                body = JSON.stringify(data);\n                req.setRequestHeader('Content-Type', 'application/json');\n            }\n        }\n\n        if (options.type) req.responseType = options.type;\n\n        req.send(body);\n        return p;\n    }\n}\n\n/**\n * [getXY   ]\n * @param  {[type]} obj  []\n * @param  {[type]} x [x]\n * @param  {[type]} y [y]\n * @param  {[type]} color [rgba]\n * @return {[type]} color [rgba]\n */\nfunction getXY(obj, x, y) { //\n\n    let w = obj.width,\n        h = obj.height,\n        d = obj.data;\n\n    let color = [];\n\n    color[0] = d[4 * (y * w + x)];\n    color[1] = d[4 * (y * w + x) + 1];\n    color[2] = d[4 * (y * w + x) + 2];\n    color[3] = d[4 * (y * w + x) + 3];\n\n    return color;\n\n}\n\n/**\n * [setXY   ]\n * @param  {[type]} obj  []\n * @param  {[type]} x [x]\n * @param  {[type]} y [y]\n * @param  {[type]} color [rgba]\n * @return {[type]}          [description]\n */\nfunction setXY(obj, x, y, color) {\n    let w = obj.width,\n        h = obj.height,\n        d = obj.data;\n\n    d[4 * (y * w + x)] = color[0];\n    d[4 * (y * w + x) + 1] = color[1];\n    d[4 * (y * w + x) + 2] = color[2];\n    d[4 * (y * w + x) + 3] = color[3];\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/picTune/utils.js","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\nvar listToStyles = require('./listToStyles')\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nmodule.exports = function (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-style-loader@3.1.2@vue-style-loader/lib/addStylesClient.js\n// module id = 6\n// module chunks = 0 1"],"sourceRoot":""}